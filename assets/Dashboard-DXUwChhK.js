import{j as e,r as c,f as te,g as oe,u as Ce}from"./index-CWlqgBx2.js";import{B as y}from"./Button-d_DNOqu3.js";import{g as De,a as be,u as xe,b as Se,c as ke,d as Ae,e as Me,f as Fe,h as Te,i as Re,j as Ie,k as Ee,l as Le,m as ze,r as $e,n as Pe}from"./MedicalRecordsModal-Cxk0sOBw.js";import{M as ce,a as de}from"./ModalHeader-CjtU9wNv.js";import"./index-NIGUFBhG.js";const me=({status:r,children:h})=>e.jsx("span",{className:`status-badge ${r}`,children:h||r}),Ve=({name:r,email:h,size:a="medium",showName:s=!0,showEmail:j=!1,className:l=""})=>{const t=p=>p.split(" ").map(b=>b.charAt(0)).join("").toUpperCase().slice(0,2),n=r||h||"User",o=t(n);return e.jsxs("div",{className:`user-avatar ${a} ${l}`,children:[e.jsx("div",{className:"avatar-circle",children:o}),(s||j)&&e.jsxs("div",{className:"avatar-info",children:[s&&e.jsx("div",{className:"avatar-name",children:n}),j&&h&&e.jsx("div",{className:"avatar-email",children:h})]})]})},He=({doctor:r,onAction:h,showActions:a=!0,className:s=""})=>{const j=l=>{h&&h(r.id,l)};return e.jsxs("div",{className:`doctor-card ${s}`,children:[e.jsx("div",{className:"doctor-header",children:e.jsxs("div",{className:"doctor-info",children:[e.jsx("h3",{className:"doctor-name",children:r.name}),e.jsxs("div",{className:"doctor-rating",children:[e.jsxs("span",{className:"rating",children:["â­ ",r.rating]}),e.jsx("span",{className:"experience",children:r.experience})]})]})}),e.jsx("div",{className:"doctor-specialization-section",children:e.jsx("span",{className:"doctor-specialization",children:r.specialization})}),e.jsxs("div",{className:"doctor-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:r.patients}),e.jsx("span",{className:"stat-label",children:"Patients"})]}),e.jsx("div",{className:"stat",children:e.jsx(me,{status:r.status})})]}),a&&e.jsxs("div",{className:"doctor-actions",children:[r.status==="pending"&&e.jsx(y,{variant:"default",size:"small",onClick:()=>j("approve"),children:"Approve"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>j("view"),children:"View Profile"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>j("edit"),children:"Edit"})]})]})},ve=({value:r,onChange:h,placeholder:a="Search...",className:s="",disabled:j=!1})=>e.jsx("div",{className:`search-input-container ${s}`,children:e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("span",{className:"search-icon",children:"ğŸ”"}),e.jsx("input",{type:"text",value:r,onChange:l=>h(l.target.value),placeholder:a,disabled:j,className:"search-input"}),r&&e.jsx("button",{className:"clear-button",onClick:()=>h(""),type:"button",children:"âœ•"})]})}),pe=({options:r=[],value:h,onChange:a,placeholder:s="Filter...",className:j="",disabled:l=!1})=>{const[t,n]=c.useState(!1),o=b=>{a(b.value),n(!1)},p=r.find(b=>b.value===h);return e.jsxs("div",{className:`filter-dropdown ${j}`,children:[e.jsxs("button",{className:`filter-dropdown-button ${t?"open":""} ${l?"disabled":""}`,onClick:()=>!l&&n(!t),disabled:l,type:"button",children:[e.jsx("span",{className:"filter-text",children:p?p.label:s}),e.jsx("span",{className:"filter-arrow",children:"â–¼"})]}),t&&e.jsxs("div",{className:"filter-dropdown-menu",children:[e.jsx("button",{className:"filter-option",onClick:()=>o({value:""}),children:"All"}),r.map(b=>e.jsx("button",{className:`filter-option ${h===b.value?"selected":""}`,onClick:()=>o(b),children:b.label},b.value))]})]})},Ne=({isOpen:r,onClose:h,onConfirm:a,title:s,message:j,confirmText:l="Confirm",cancelText:t="Cancel",variant:n="danger"})=>{if(!r)return null;const o=p=>{p.target===p.currentTarget&&h()};return e.jsx("div",{className:"confirmation-dialog-backdrop",onClick:o,children:e.jsxs("div",{className:"confirmation-dialog",children:[e.jsxs("div",{className:"confirmation-dialog-header",children:[e.jsx("h3",{className:"confirmation-dialog-title",children:s}),e.jsx("button",{className:"confirmation-dialog-close",onClick:h,type:"button",children:"âœ•"})]}),e.jsx("div",{className:"confirmation-dialog-body",children:e.jsx("p",{className:"confirmation-dialog-message",children:j})}),e.jsxs("div",{className:"confirmation-dialog-footer",children:[e.jsx("button",{className:"confirmation-dialog-button cancel",onClick:h,type:"button",children:t}),e.jsx("button",{className:`confirmation-dialog-button confirm ${n}`,onClick:a,type:"button",children:l})]})]})})},ge=({currentPage:r,totalPages:h,onPageChange:a,totalItems:s,itemsPerPage:j,className:l=""})=>{const t=(r-1)*j+1,n=Math.min(r*j,s),o=()=>{const p=[];if(h<=5)for(let g=1;g<=h;g++)p.push(g);else if(r<=3){for(let g=1;g<=4;g++)p.push(g);p.push("..."),p.push(h)}else if(r>=h-2){p.push(1),p.push("...");for(let g=h-3;g<=h;g++)p.push(g)}else{p.push(1),p.push("...");for(let g=r-1;g<=r+1;g++)p.push(g);p.push("..."),p.push(h)}return p};return e.jsxs("div",{className:`pagination-container ${l}`,children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",t," to ",n," of ",s," items"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-button",onClick:()=>a(r-1),disabled:r===1,type:"button",children:"â† Previous"}),e.jsx("div",{className:"pagination-pages",children:o().map((p,b)=>e.jsx("button",{className:`pagination-page ${p===r?"active":""} ${p==="..."?"ellipsis":""}`,onClick:()=>typeof p=="number"&&a(p),disabled:p==="...",type:"button",children:p},b))}),e.jsx("button",{className:"pagination-button",onClick:()=>a(r+1),disabled:r===h,type:"button",children:"Next â†’"})]})]})},Ue=({patientId:r,patientName:h})=>{const[a,s]=c.useState([]),[j,l]=c.useState(!0),[t,n]=c.useState(null),[o,p]=c.useState(!1),[b,g]=c.useState(!1),[A,u]=c.useState(null),[k,D]=c.useState([]),[f,I]=c.useState(!1);c.useEffect(()=>{r&&(z(),$())},[r]);const z=async()=>{var i;try{l(!0),n(null);const d=await De(r);if(d.data.success){console.log("AppointmentHistory API Response:",d.data);const F=((i=d.data.data)==null?void 0:i.visits)||[];console.log("Setting appointments to:",F),s(F)}else n("Failed to load appointments")}catch(d){console.error("Error loading appointments:",d),n("Failed to load appointments")}finally{l(!1)}},$=async()=>{try{const i=await be();if(console.log("Doctors API Response:",i.data),i.data.success){const d=i.data.data||[];console.log("Setting doctors to:",d),D(d)}}catch(i){console.error("Error loading doctors:",i)}},_=i=>{u(i),p(!0)},T=i=>{u(i),g(!0)},q=async i=>{var d;if(A)try{I(!0),(await xe(A._id,{doctorId:i,doctorName:(d=k.find(O=>O._id===i))==null?void 0:d.name})).data.success&&(await z(),p(!1),u(null))}catch(F){console.error("Error assigning doctor:",F),alert("Failed to assign doctor. Please try again.")}finally{I(!1)}},Z=async(i,d)=>{if(A)try{I(!0),(await xe(A._id,{appointmentDate:i,appointmentTime:d})).data.success&&(await z(),g(!1),u(null))}catch(F){console.error("Error rescheduling appointment:",F),alert("Failed to reschedule appointment. Please try again.")}finally{I(!1)}},ee=i=>({Scheduled:"blue","In Progress":"yellow",Completed:"green",Cancelled:"red","No Show":"gray"})[i]||"gray",w=i=>({Low:"gray",Normal:"blue",High:"orange",Emergency:"red"})[i]||"blue",x=(i,d)=>`${new Date(i).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})} at ${d}`;return j?e.jsx("div",{className:"appointment-history",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading appointment history..."})]})}):t?e.jsx("div",{className:"appointment-history",children:e.jsxs("div",{className:"error-state",children:[e.jsx("div",{className:"error-icon",children:"âš ï¸"}),e.jsx("p",{children:t}),e.jsx(y,{onClick:z,variant:"primary",size:"small",children:"Try Again"})]})}):e.jsxs("div",{className:"appointment-history",children:[e.jsxs("div",{className:"appointment-header",children:[e.jsx("h3",{children:"ğŸ“… Appointment History"}),e.jsxs("div",{className:"appointment-count",children:[Array.isArray(a)?a.length:0," appointment",(Array.isArray(a)?a.length:0)!==1?"s":""]})]}),!Array.isArray(a)||a.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ğŸ“…"}),e.jsxs("p",{children:["No appointments found for ",h]})]}):e.jsx("div",{className:"appointments-list",children:a.map(i=>e.jsxs("div",{className:"appointment-card",children:[e.jsxs("div",{className:"appointment-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("span",{className:"visit-id",children:i.visitId}),e.jsx("span",{className:`status-dot status-${ee(i.status)}`}),e.jsx("span",{className:"status-text",children:i.status})]}),e.jsxs("div",{className:"header-right",children:[!i.doctorName&&i.status==="Scheduled"&&e.jsx("button",{className:"action-btn assign-btn",onClick:()=>_(i),disabled:f,children:"Assign Doctor"}),i.status==="Scheduled"&&e.jsx("button",{className:"action-btn reschedule-btn",onClick:()=>T(i),disabled:f,children:"Reschedule"}),i.status==="Completed"&&e.jsx("button",{className:"action-btn view-btn",children:"View Details"})]})]}),e.jsxs("div",{className:"appointment-content",children:[e.jsxs("div",{className:"content-row",children:[e.jsx("div",{className:"date-time",children:x(i.appointmentDate,i.appointmentTime)}),e.jsxs("div",{className:"type-priority",children:[e.jsx("span",{className:"visit-type",children:i.visitType}),e.jsx("span",{className:"separator",children:"|"}),e.jsx("span",{className:`priority priority-${w(i.priority)}`,children:i.priority})]})]}),e.jsxs("div",{className:"content-row",children:[e.jsxs("div",{className:"department",children:[e.jsx("span",{className:"label",children:"Department:"}),e.jsx("span",{className:"value",children:i.department})]}),e.jsxs("div",{className:"doctor",children:[e.jsx("span",{className:"label",children:"Doctor:"}),e.jsx("span",{className:`doctor-name ${i.doctorName?"assigned":"unassigned"}`,children:i.doctorName||"No Doctor Assigned"})]})]}),i.chiefComplaint&&e.jsx("div",{className:"content-row complaint-row",children:e.jsxs("div",{className:"complaint",children:[e.jsx("span",{className:"label",children:"Chief Complaint:"}),e.jsx("span",{className:"value",children:i.chiefComplaint})]})}),i.notes&&e.jsx("div",{className:"content-row notes-row",children:e.jsxs("div",{className:"notes",children:[e.jsx("span",{className:"label",children:"Notes:"}),e.jsx("span",{className:"value",children:i.notes})]})})]})]},i._id))}),o&&A&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Assign Doctor"}),e.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Select a doctor for appointment: ",e.jsx("strong",{children:A.visitId})]}),e.jsxs("p",{style:{fontSize:"12px",color:"#6b7280"},children:["Available doctors: ",k.filter(i=>i.status==="active").length]}),e.jsxs("div",{className:"doctor-list",children:[k.filter(i=>i.status==="active").map(i=>e.jsxs("button",{className:"doctor-option",onClick:()=>q(i._id),disabled:f,children:[e.jsx("div",{className:"doctor-name",children:i.name}),e.jsx("div",{className:"doctor-specialty",children:i.specialty||i.department||"General Medicine"})]},i._id)),k.filter(i=>i.status==="active").length===0&&e.jsx("div",{className:"no-doctors",children:e.jsx("p",{children:"No active doctors available. Please add doctors first."})})]})]})]})}),b&&A&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Reschedule Appointment"}),e.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Reschedule appointment: ",e.jsx("strong",{children:A.visitId})]}),e.jsxs("div",{className:"reschedule-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Date:"}),e.jsx("input",{type:"date",id:"newDate",min:new Date().toISOString().split("T")[0],defaultValue:A.appointmentDate})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Time:"}),e.jsx("input",{type:"time",id:"newTime",defaultValue:A.appointmentTime})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-cancel",onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{className:"btn-confirm",onClick:()=>{const i=document.getElementById("newDate").value,d=document.getElementById("newTime").value;i&&d?Z(i,d):alert("Please select both date and time")},disabled:f,children:f?"Updating...":"Reschedule"})]})]})]})]})})]})},Oe=({isOpen:r,onClose:h,patient:a,onEdit:s,onBookAppointment:j,onViewRecords:l,onSendMessage:t})=>{if(!a)return null;const n=p=>({active:"green",pending:"yellow",inactive:"red"})[p]||"gray",o=p=>new Date(p).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"});return e.jsx(ce,{isOpen:r,onClose:h,className:"patient-details-modal",children:e.jsxs("div",{className:"modal-content-container",children:[e.jsx(de,{title:"Patient Details",icon:"ğŸ‘¤",onClose:h}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"patient-details-grid",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ğŸ“‹ Personal Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Full Name"}),e.jsx("span",{children:a.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Email"}),e.jsx("span",{children:a.email||"Not provided"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Mobile"}),e.jsx("span",{children:a.mobile})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Age"}),e.jsxs("span",{children:[a.age," years"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Gender"}),e.jsx("span",{children:a.gender})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Blood Group"}),e.jsx("span",{children:a.bloodGroup})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ğŸ¥ Medical Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"UHID"}),e.jsx("span",{className:"uhid-display",children:a.uhid})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Registration Date"}),e.jsx("span",{children:o(a.registrationDate)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Last Visit"}),e.jsx("span",{children:o(a.lastVisit)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Status"}),e.jsx(me,{status:a.status,variant:n(a.status),size:"small"})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ğŸš¨ Emergency Contact"}),e.jsx("div",{className:"detail-grid",children:e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Emergency Contact"}),e.jsx("span",{children:a.emergencyContact})]})})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"âš¡ Quick Actions"}),e.jsxs("div",{className:"action-buttons-grid",children:[e.jsx(y,{variant:"primary",size:"medium",onClick:()=>j(a),children:"ğŸ“… Book Appointment"}),e.jsx(y,{variant:"default",size:"medium",onClick:()=>l(a),children:"ğŸ“‹ View Medical Records"}),e.jsx(y,{variant:"default",size:"medium",onClick:()=>t(a),children:"ğŸ’¬ Send Message"}),e.jsx(y,{variant:"default",size:"medium",onClick:()=>s(a),children:"âœï¸ Edit Patient"})]})]}),e.jsx("div",{className:"detail-section",children:e.jsx(Ue,{patientId:a._id,patientName:a.name})})]})})]})})},Be=({isOpen:r,onClose:h,appointment:a,onVisitUpdate:s})=>{const[j,l]=c.useState(null),[t,n]=c.useState({diagnosis:"",prescription:[],notes:"",followUpRequired:!1,followUpDate:"",status:(a==null?void 0:a.status)||"Scheduled"}),[o,p]=c.useState(!1),[b,g]=c.useState(!1),[A,u]=c.useState("patient-info"),[k,D]=c.useState({name:"",dosage:"",frequency:"",duration:"",instructions:""}),[f,I]=c.useState(!1),z=c.useRef(null);c.useEffect(()=>{r&&(a!=null&&a.patientId)&&($(),n({diagnosis:a.diagnosis||"",prescription:a.prescription||[],notes:a.notes||"",followUpRequired:a.followUpRequired||!1,followUpDate:a.followUpDate?a.followUpDate.split("T")[0]:"",status:a.status||"Scheduled"}))},[r,a]),c.useEffect(()=>{const x=()=>{if(z.current){const{scrollHeight:i,clientHeight:d}=z.current;I(i>d)}};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[A,j,t]);const $=async()=>{try{p(!0);const x=await Se(a.patientId);x.data.success&&l(x.data.data)}catch(x){console.error("Error loading patient details:",x)}finally{p(!1)}},_=x=>{const{name:i,value:d,type:F,checked:O}=x.target;n(v=>({...v,[i]:F==="checkbox"?O:d}))},T=()=>{k.name&&k.dosage&&(n(x=>({...x,prescription:[...x.prescription,{...k}]})),D({name:"",dosage:"",frequency:"",duration:"",instructions:""}))},q=x=>{n(i=>({...i,prescription:i.prescription.filter((d,F)=>F!==x)}))},Z=async()=>{try{g(!0);const x={diagnosis:t.diagnosis,prescription:t.prescription,notes:t.notes,followUpRequired:t.followUpRequired,followUpDate:t.followUpDate?new Date(t.followUpDate).toISOString():null},i=await xe(a.id,x);i.data.success&&(s==null||s(i.data.data.visit),alert("Progress saved successfully!"))}catch(x){console.error("Error saving progress:",x),alert("Failed to save progress. Please try again.")}finally{g(!1)}},ee=async()=>{try{g(!0);const x={status:"Completed",diagnosis:t.diagnosis,prescription:t.prescription,notes:t.notes,followUpRequired:t.followUpRequired,followUpDate:t.followUpDate?new Date(t.followUpDate).toISOString():null,completedAt:new Date().toISOString()},i=await xe(a.id,x);if(i.data.success){if(n(d=>({...d,status:"Completed"})),s==null||s(i.data.data.visit),t.prescription&&t.prescription.length>0)try{const d=t.prescription.map(F=>ke({patientId:a.patientId,visitId:a.id,medication:F.name,dosage:F.dosage,frequency:F.frequency,duration:F.duration,instructions:F.instructions,notes:`Prescribed during visit on ${new Date().toLocaleDateString()}`,status:"Active"}));await Promise.all(d),console.log("All prescriptions created successfully")}catch(d){console.error("Error creating prescriptions:",d)}alert("Visit completed successfully! Prescription and all details have been saved."),h()}}catch(x){console.error("Error completing visit:",x),alert("Failed to complete visit. Please try again.")}finally{g(!1)}},w=x=>x;return!r||!a?null:e.jsx(ce,{isOpen:r,onClose:h,className:"patient-visit-modal",children:e.jsxs("div",{className:"modal-content-container",children:[e.jsx(de,{title:`${a.patient} - ${a.type}`,icon:"ğŸ‘¨â€âš•ï¸",onClose:h}),e.jsxs("div",{className:"visit-modal-content",children:[e.jsxs("div",{className:"appointment-header-info",children:[e.jsxs("div",{className:"appointment-time",children:[e.jsx("span",{className:"time",children:w(a.time)}),e.jsx("span",{className:`status-badge ${a.status.toLowerCase()}`,children:a.status})]}),e.jsxs("div",{className:"appointment-details",children:[e.jsx("span",{className:"visit-type",children:a.type}),e.jsx("span",{className:"department",children:a.department}),a.priority&&e.jsx("span",{className:`priority priority-${a.priority.toLowerCase()}`,children:a.priority})]})]}),e.jsxs("div",{className:"tab-navigation",children:[e.jsx("button",{className:`tab-button ${A==="patient-info"?"active":""}`,onClick:()=>u("patient-info"),children:"ğŸ‘¤ Patient Info"}),e.jsx("button",{className:`tab-button ${A==="visit-details"?"active":""}`,onClick:()=>u("visit-details"),children:"ğŸ“‹ Visit Details"}),e.jsx("button",{className:`tab-button ${A==="prescription"?"active":""}`,onClick:()=>u("prescription"),children:"ğŸ’Š Prescription"})]}),e.jsxs("div",{className:`tab-content ${f?"scrollable":""}`,ref:z,children:[A==="patient-info"&&e.jsx("div",{className:"patient-info-tab",children:o?e.jsx("div",{className:"loading-state",children:"Loading patient details..."}):j?e.jsxs("div",{className:"patient-details-grid",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"Personal Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Name:"}),e.jsx("span",{children:j.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"UHID:"}),e.jsx("span",{children:j.uhid})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Age:"}),e.jsxs("span",{children:[j.age," years"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Gender:"}),e.jsx("span",{children:j.gender})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Mobile:"}),e.jsx("span",{children:j.mobile})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:j.email||"Not provided"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Blood Group:"}),e.jsx("span",{children:j.bloodGroup||"Not specified"})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"Address Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item full-width",children:[e.jsx("label",{children:"Address:"}),e.jsx("span",{children:j.address||"Not provided"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"City:"}),e.jsx("span",{children:j.city||"Not provided"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"State:"}),e.jsx("span",{children:j.state||"Not provided"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Pincode:"}),e.jsx("span",{children:j.pincode||"Not provided"})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"Emergency Contact"}),e.jsx("div",{className:"detail-grid",children:e.jsxs("div",{className:"detail-item full-width",children:[e.jsx("label",{children:"Emergency Contact:"}),e.jsx("span",{children:j.emergencyContact||"Not provided"})]})})]})]}):e.jsx("div",{className:"error-state",children:"Failed to load patient details"})}),A==="visit-details"&&e.jsxs("div",{className:"visit-details-tab",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Chief Complaint"}),e.jsx("p",{className:"chief-complaint",children:a.notes||"No chief complaint provided"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Diagnosis"}),e.jsx("textarea",{name:"diagnosis",value:t.diagnosis,onChange:_,placeholder:"Enter diagnosis...",rows:3,className:"diagnosis-textarea"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Visit Notes"}),e.jsx("textarea",{name:"notes",value:t.notes,onChange:_,placeholder:"Enter visit notes...",rows:4,className:"notes-textarea"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Follow-up"}),e.jsxs("div",{className:"follow-up-controls",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"followUpRequired",checked:t.followUpRequired,onChange:_}),"Follow-up required"]}),t.followUpRequired&&e.jsx("input",{type:"date",name:"followUpDate",value:t.followUpDate,onChange:_,className:"follow-up-date"})]})]})]}),A==="prescription"&&e.jsxs("div",{className:"prescription-tab",children:[e.jsxs("div",{className:"add-medicine-section",children:[e.jsx("h3",{children:"Add Medicine"}),e.jsxs("div",{className:"medicine-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("input",{type:"text",placeholder:"Medicine name",value:k.name,onChange:x=>D(i=>({...i,name:x.target.value})),className:"medicine-input"}),e.jsx("input",{type:"text",placeholder:"Dosage (e.g., 10mg)",value:k.dosage,onChange:x=>D(i=>({...i,dosage:x.target.value})),className:"medicine-input"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("select",{value:k.frequency,onChange:x=>D(i=>({...i,frequency:x.target.value})),className:"medicine-select",children:[e.jsx("option",{value:"",children:"Select frequency"}),e.jsx("option",{value:"Once daily",children:"Once daily"}),e.jsx("option",{value:"Twice daily",children:"Twice daily"}),e.jsx("option",{value:"Three times daily",children:"Three times daily"}),e.jsx("option",{value:"As needed",children:"As needed"})]}),e.jsx("input",{type:"text",placeholder:"Duration (e.g., 7 days)",value:k.duration,onChange:x=>D(i=>({...i,duration:x.target.value})),className:"medicine-input"})]}),e.jsx("div",{className:"form-row",children:e.jsx("input",{type:"text",placeholder:"Instructions (e.g., Take with food)",value:k.instructions,onChange:x=>D(i=>({...i,instructions:x.target.value})),className:"medicine-input full-width"})}),e.jsx(y,{variant:"primary",size:"small",onClick:T,disabled:!k.name||!k.dosage,children:"Add Medicine"})]})]}),e.jsxs("div",{className:"prescription-list-section",children:[e.jsxs("h3",{children:["Prescription (",t.prescription.length,")"]}),t.prescription.length>0?e.jsx("div",{className:"prescription-list",children:t.prescription.map((x,i)=>e.jsxs("div",{className:"prescription-item",children:[e.jsxs("div",{className:"medicine-info",children:[e.jsx("div",{className:"medicine-name",children:x.name}),e.jsxs("div",{className:"medicine-details",children:[x.dosage," â€¢ ",x.frequency," â€¢ ",x.duration]}),x.instructions&&e.jsxs("div",{className:"medicine-instructions",children:["Instructions: ",x.instructions]})]}),e.jsx("button",{className:"remove-medicine",onClick:()=>q(i),children:"âœ•"})]},i))}):e.jsx("div",{className:"no-prescription",children:"No medicines added yet"})]})]})]}),e.jsxs("div",{className:"visit-actions",children:[(t.status==="scheduled"||t.status==="Scheduled")&&e.jsx(y,{variant:"success",onClick:ee,disabled:b,children:b?"Completing...":"Complete Visit & Save Prescription"}),(t.status==="in-progress"||t.status==="In Progress")&&e.jsxs("div",{className:"action-buttons-group",children:[e.jsx(y,{variant:"secondary",onClick:Z,disabled:b,children:b?"Saving...":"Save Progress"}),e.jsx(y,{variant:"success",onClick:ee,disabled:b,children:b?"Completing...":"Complete Visit & Save Prescription"})]}),(t.status==="completed"||t.status==="Completed")&&e.jsxs("div",{className:"completed-visit-info",children:[e.jsx("span",{className:"completed-badge",children:"âœ… Visit Completed"}),e.jsxs("span",{className:"completion-time",children:["Completed at ",w(a.time)]})]})]})]})]})})},_e=({isOpen:r,onClose:h,familyHead:a,onRegister:s})=>{const[j,l]=c.useState(""),t=[{value:"Child",label:"Child"},{value:"Spouse",label:"Spouse"},{value:"Parent",label:"Parent"},{value:"Sibling",label:"Sibling"},{value:"Grandchild",label:"Grandchild"},{value:"Grandparent",label:"Grandparent"},{value:"Other",label:"Other"}],n=()=>{j&&s(j)};return!r||!a?null:e.jsx("div",{className:"family-member-registration-overlay",onClick:h,children:e.jsxs("div",{className:"family-member-registration-modal",onClick:o=>o.stopPropagation(),children:[e.jsx(de,{title:"Register as Family Member",icon:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦",onClose:h}),e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"family-head-info",children:[e.jsx("h3",{children:"Family Head Information"}),e.jsxs("div",{className:"family-head-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Name:"})," ",a.name]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"UHID:"})," ",a.uhid]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Mobile:"})," ",a.mobile]}),a.email&&e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Email:"})," ",a.email]})]})]}),e.jsxs("div",{className:"relationship-selection",children:[e.jsx("h3",{children:"Select Relationship"}),e.jsxs("p",{children:["How is this patient related to ",a.name,"?"]}),e.jsx("div",{className:"relationship-options",children:t.map(o=>e.jsxs("label",{className:"relationship-option",children:[e.jsx("input",{type:"radio",name:"relationship",value:o.value,checked:j===o.value,onChange:p=>l(p.target.value)}),e.jsx("span",{className:"option-label",children:o.label})]},o.value))})]}),e.jsxs("div",{className:"registration-note",children:[e.jsx("div",{className:"note-icon",children:"â„¹ï¸"}),e.jsx("div",{className:"note-content",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," This patient will be registered as a family member and can share the same contact information (phone/email) with ",a.name,"."]})})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx(y,{variant:"default",size:"medium",onClick:h,children:"Cancel"}),e.jsxs(y,{variant:"primary",size:"medium",onClick:n,disabled:!j,children:["Register as ",j||"Family Member"]})]})]})})},qe=({isOpen:r,onClose:h,onSave:a,existingPatient:s=null,existingPatients:j=[]})=>{const l={name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",mobile:(s==null?void 0:s.mobile)||"",age:(s==null?void 0:s.age)||"",gender:(s==null?void 0:s.gender)||"",bloodGroup:(s==null?void 0:s.bloodGroup)||"",emergencyContact:(s==null?void 0:s.emergencyContact)||"",address:(s==null?void 0:s.address)||"",city:(s==null?void 0:s.city)||"",state:(s==null?void 0:s.state)||"",pincode:(s==null?void 0:s.pincode)||"",dateOfBirth:(s==null?void 0:s.dateOfBirth)||"",occupation:(s==null?void 0:s.occupation)||"",maritalStatus:(s==null?void 0:s.maritalStatus)||"",guardianName:(s==null?void 0:s.guardianName)||"",guardianRelation:(s==null?void 0:s.guardianRelation)||"",isFamilyMember:(s==null?void 0:s.isFamilyMember)||!1,familyHeadName:(s==null?void 0:s.familyHeadName)||"",familyHeadUHID:(s==null?void 0:s.familyHeadUHID)||"",relationshipToHead:(s==null?void 0:s.relationshipToHead)||""},[t,n]=c.useState(l);c.useEffect(()=>{s&&n({name:s.name||"",email:s.email||"",mobile:s.mobile||"",age:s.age||"",gender:s.gender||"",bloodGroup:s.bloodGroup||"",emergencyContact:s.emergencyContact||"",address:s.address||"",city:s.city||"",state:s.state||"",pincode:s.pincode||"",dateOfBirth:s.dateOfBirth||"",occupation:s.occupation||"",maritalStatus:s.maritalStatus||"",guardianName:s.guardianName||"",guardianRelation:s.guardianRelation||"",isFamilyMember:s.isFamilyMember||!1,familyHeadName:s.familyHeadName||"",familyHeadUHID:s.familyHeadUHID||"",relationshipToHead:s.relationshipToHead||""})},[s]);const[o,p]=c.useState({}),[b,g]=c.useState(!1),[A,u]=c.useState(null),[k,D]=c.useState(!1),[f,I]=c.useState(!1),[z,$]=c.useState(null),[_,T]=c.useState(null),[q,Z]=c.useState(!1),ee=()=>{const N="DELH01",L=new Date,G=L.getFullYear().toString().slice(-2),Q=(L.getMonth()+1).toString().padStart(2,"0"),P=L.getDate().toString().padStart(2,"0"),m=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`${N}-${G}${Q}${P}-${m}`},w=N=>{const L=[],G=new Map;if(N.isFamilyMember&&N.familyHeadName&&N.familyHeadUHID)return L;const Q=j.find(P=>P.id!==((s==null?void 0:s._id)||(s==null?void 0:s.id))&&P.name.toLowerCase()===N.name.toLowerCase()&&P.mobile.replace(/\s/g,"")===N.mobile.replace(/\s/g,""));if(Q)return L.push({type:"exact_duplicate",field:"name",message:`A patient with exact same name "${N.name}" and mobile "${N.mobile}" already exists`,existingPatient:Q,canBeFamilyMember:!0,isBlocking:!0}),L;if(N.email.trim()&&!N.isFamilyMember){const P=j.find(m=>m.id!==((s==null?void 0:s._id)||(s==null?void 0:s.id))&&m.email&&m.email.toLowerCase()===N.email.toLowerCase());P&&G.set(P.uhid,{patient:P,matches:["email"],canBeFamilyMember:!0})}if(!N.isFamilyMember){const P=j.find(m=>m.id!==((s==null?void 0:s._id)||(s==null?void 0:s.id))&&m.mobile.replace(/\s/g,"")===N.mobile.replace(/\s/g,""));if(P)if(P.name.toLowerCase(),N.name.toLowerCase(),G.has(P.uhid)){const m=G.get(P.uhid);m.matches.push("mobile"),m.canBeFamilyMember=!0}else G.set(P.uhid,{patient:P,matches:["mobile"],canBeFamilyMember:!0})}if(G.forEach(({patient:P,matches:m,canBeFamilyMember:R})=>{const C=P.name.toLowerCase()!==N.name.toLowerCase(),E=m.includes("email"),V=m.includes("mobile");let ie,ne;m.length===2?(ie="contact_match",ne=`A patient with the same email "${N.email}" and mobile "${N.mobile}" already exists (${P.name})`):E?(ie="email",ne=`A patient with email "${N.email}" already exists (${P.name})`):V&&(ie=C?"family_member_candidate":"mobile",ne=C?`A patient with mobile number "${N.mobile}" already exists (${P.name}). This might be a family member.`:`A patient with mobile number "${N.mobile}" already exists (${P.name})`),L.push({type:ie,field:E?"email":"mobile",message:ne,existingPatient:P,canBeFamilyMember:R,isBlocking:!C&&V,matches:m})}),N.isFamilyMember&&(N.email.trim()||N.mobile.trim())){const P=j.find(m=>m.id!==((s==null?void 0:s._id)||(s==null?void 0:s.id))&&(N.email.trim()&&m.email&&m.email.toLowerCase()===N.email.toLowerCase()||N.mobile.trim()&&m.mobile.replace(/\s/g,"")===N.mobile.replace(/\s/g,""))&&m.isFamilyMember);P&&L.push({type:"family_member_info",field:"mobile",message:`Family member found with same contact info: ${P.name} (${P.relationshipToHead||"Family Member"})`,existingPatient:P,isInfoOnly:!0})}return L},x=N=>{const{name:L,value:G}=N.target;n(Q=>({...Q,[L]:G})),o[L]&&p(Q=>({...Q,[L]:""}))},i=()=>{const N={};return t.name.trim()?t.name.trim().length<2&&(N.name="Name must be at least 2 characters"):N.name="Name is required",t.email.trim()&&!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.email)&&(N.email="Please enter a valid email address"),t.mobile.trim()?/^(\+91|91)?[6-9]\d{9}$/.test(t.mobile.replace(/\s/g,""))||(N.mobile="Please enter a valid 10-digit mobile number"):N.mobile="Mobile number is required",t.age?(t.age<0||t.age>150)&&(N.age="Age must be between 0 and 150"):N.age="Age is required",t.gender||(N.gender="Gender is required"),t.emergencyContact.trim()&&!/^(\+91|91)?[6-9]\d{9}$/.test(t.emergencyContact.replace(/\s/g,""))&&(N.emergencyContact="Please enter a valid 10-digit emergency contact number"),w(t).filter(Q=>!Q.isInfoOnly&&Q.isBlocking!==!1).length>0,p(N),Object.keys(N).length===0},d=async N=>{if(N.preventDefault(),p({}),!s){const L=w(t);if(L.length>0){u(L),T({...t,email:t.email.trim()||null,id:(s==null?void 0:s._id)||(s==null?void 0:s.id)||Date.now(),uhid:(s==null?void 0:s.uhid)||ee(),status:(s==null?void 0:s.status)||"Active",registrationDate:(s==null?void 0:s.registrationDate)||new Date().toISOString().split("T")[0],lastVisit:(s==null?void 0:s.lastVisit)||new Date().toISOString().split("T")[0]}),D(!0);return}}i()&&await F()},F=async()=>{var L,G,Q,P,m,R;g(!0);const N=_||{...t,email:t.email.trim()||null,id:(s==null?void 0:s.id)||Date.now(),uhid:(s==null?void 0:s.uhid)||ee(),status:(s==null?void 0:s.status)||"Active",registrationDate:(s==null?void 0:s.registrationDate)||new Date().toISOString().split("T")[0],lastVisit:(s==null?void 0:s.lastVisit)||new Date().toISOString().split("T")[0]};try{let C;if(s){const E=s._id||s.id;console.log("ğŸ”„ Updating existing patient:",E,"Patient object:",s),C=await Ae(E,N)}else console.log("âœ¨ Creating new patient"),C=await Me(N);if(C.data.success)await a(C.data.data),h(),n(l),p({}),Z(!1),alert(s?"âœ… Patient updated successfully!":"âœ… Patient registered successfully!");else if(C.data.duplicates&&C.data.duplicates.length>0){console.log("ğŸ”„ Backend detected duplicates:",C.data.duplicates);const E=C.data.duplicates.map(V=>({type:"exact_duplicate",field:"mobile",message:`A patient with mobile number "${V.mobile}" already exists (${V.name})`,existingPatient:{id:V.id,name:V.name,uhid:V.uhid,mobile:V.mobile,email:V.email,isFamilyMember:!1},canBeFamilyMember:!0,isBlocking:!0}));u(E),T(N),D(!0)}else p({submit:C.data.message||(s?"Failed to update patient":"Failed to create patient")})}catch(C){if(console.error("Error saving patient:",C),console.log("ğŸ” Error response data:",(L=C.response)==null?void 0:L.data),((G=C.response)==null?void 0:G.status)===409&&((P=(Q=C.response)==null?void 0:Q.data)==null?void 0:P.message)==="Duplicate patient detected")if(console.log("ğŸ”„ Backend detected duplicates (409 error):",C.response.data),C.response.data.duplicates&&C.response.data.duplicates.length>0){const E=C.response.data.duplicates.map(V=>({type:"exact_duplicate",field:"mobile",message:`A patient with mobile number "${V.mobile}" already exists (${V.name})`,existingPatient:{id:V.id,name:V.name,uhid:V.uhid,mobile:V.mobile,email:V.email||"",isFamilyMember:!1},canBeFamilyMember:!0,isBlocking:!0}));u(E),T(N),D(!0)}else{const E={type:"exact_duplicate",field:"mobile",message:"A duplicate patient was detected by the backend",existingPatient:{id:"unknown",name:"Existing Patient",uhid:"Unknown",mobile:N.mobile,email:N.email||"",isFamilyMember:!1},canBeFamilyMember:!0,isBlocking:!0};u([E]),T(N),D(!0)}else if((R=(m=C.response)==null?void 0:m.data)!=null&&R.duplicates){console.log("ğŸ”„ Backend detected duplicates (HTTP error):",C.response.data.duplicates);const E=C.response.data.duplicates.map(V=>({type:"exact_duplicate",field:"mobile",message:`A patient with mobile number "${V.mobile}" already exists (${V.name})`,existingPatient:{id:V.id,name:V.name,uhid:V.uhid,mobile:V.mobile,email:V.email,isFamilyMember:!1},canBeFamilyMember:!0,isBlocking:!0}));u(E),T(N),D(!0)}else p({submit:s?"Failed to update patient. Please try again.":"Failed to save patient. Please try again."})}finally{g(!1)}},O=()=>{D(!1),F()},v=N=>{console.log("View existing patient:",N),alert(`Viewing existing patient: ${N.name} (UHID: ${N.uhid})`)},J=N=>{n(L=>({...L,isFamilyMember:!0,familyHeadName:N.name,familyHeadUHID:N.uhid,email:L.email,mobile:L.mobile})),Z(!0),D(!1),u(null),T(null),p(L=>{const G={...L};return delete G.duplicate,delete G.email,delete G.mobile,G})},Y=N=>{n(L=>({...L,relationshipToHead:N})),I(!1),$(null),F()},se=["A+","A-","B+","B-","AB+","AB-","O+","O-"],K=["Male","Female","Other"],ae=["Single","Married","Divorced","Widowed"];return e.jsxs(ce,{isOpen:r,onClose:h,className:"patient-registration-modal",children:[e.jsxs("div",{className:"modal-content-container",children:[e.jsx(de,{title:s?"Edit Patient":"Register New Patient",icon:s?"âœï¸":"ğŸ‘¤",onClose:h}),e.jsx("div",{className:"modal-body form-content",children:e.jsxs("form",{onSubmit:d,className:"patient-registration-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ğŸ“‹ Personal Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:x,className:o.name?"error":"",placeholder:"Enter full name"}),o.name&&e.jsx("span",{className:"error-message",children:o.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:x,className:o.email?"error":"",placeholder:"Enter email address (Optional)"}),o.email&&e.jsx("span",{className:"error-message",children:o.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"mobile",children:"Mobile Number *"}),e.jsx("input",{type:"tel",id:"mobile",name:"mobile",value:t.mobile,onChange:x,className:o.mobile?"error":"",placeholder:"+91 98765 43210",readOnly:!!s,style:s?{backgroundColor:"#f9fafb",color:"#6b7280",cursor:"not-allowed"}:{}}),s&&e.jsx("small",{className:"form-help",style:{color:"#6b7280",fontStyle:"italic"},children:"ğŸ”’ Mobile number cannot be changed for existing patients (data integrity)"}),o.mobile&&e.jsx("span",{className:"error-message",children:o.mobile})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"age",children:"Age *"}),e.jsx("input",{type:"number",id:"age",name:"age",value:t.age,onChange:x,className:o.age?"error":"",placeholder:"Enter age",min:"0",max:"150"}),o.age&&e.jsx("span",{className:"error-message",children:o.age})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"gender",children:"Gender *"}),e.jsxs("select",{id:"gender",name:"gender",value:t.gender,onChange:x,className:o.gender?"error":"",children:[e.jsx("option",{value:"",children:"Select Gender"}),K.map(N=>e.jsx("option",{value:N,children:N},N))]}),o.gender&&e.jsx("span",{className:"error-message",children:o.gender})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"bloodGroup",children:"Blood Group"}),e.jsxs("select",{id:"bloodGroup",name:"bloodGroup",value:t.bloodGroup,onChange:x,className:o.bloodGroup?"error":"",children:[e.jsx("option",{value:"",children:"Select Blood Group"}),se.map(N=>e.jsx("option",{value:N,children:N},N))]}),o.bloodGroup&&e.jsx("span",{className:"error-message",children:o.bloodGroup})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ğŸ“ Contact Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"emergencyContact",children:"Emergency Contact"}),e.jsx("input",{type:"tel",id:"emergencyContact",name:"emergencyContact",value:t.emergencyContact,onChange:x,className:o.emergencyContact?"error":"",placeholder:"+91 98765 43220 (Optional)"}),o.emergencyContact&&e.jsx("span",{className:"error-message",children:o.emergencyContact})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("textarea",{id:"address",name:"address",value:t.address,onChange:x,placeholder:"Enter complete address",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"city",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:t.city,onChange:x,placeholder:"Enter city"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"state",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",value:t.state,onChange:x,placeholder:"Enter state"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"pincode",children:"Pincode"}),e.jsx("input",{type:"text",id:"pincode",name:"pincode",value:t.pincode,onChange:x,placeholder:"Enter pincode"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Relationship"}),q&&e.jsxs("div",{className:"auto-fill-success",children:[e.jsx("span",{className:"success-icon",children:"âœ…"}),e.jsx("span",{className:"success-text",children:"Family member information has been auto-filled from duplicate detection!"})]}),t.isFamilyMember&&t.familyHeadName&&t.familyHeadUHID&&e.jsxs("div",{className:"family-member-status",children:[e.jsx("span",{className:"status-icon",children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"}),e.jsx("span",{className:"status-text",children:"This is a family member registration - duplicate checking is disabled"})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"isFamilyMember",checked:t.isFamilyMember,onChange:N=>{n(L=>({...L,isFamilyMember:N.target.checked,familyHeadName:N.target.checked?L.familyHeadName:"",familyHeadUHID:N.target.checked?L.familyHeadUHID:"",relationshipToHead:N.target.checked?L.relationshipToHead:""})),N.target.checked||Z(!1)}}),e.jsx("span",{className:"checkbox-text",children:"This patient is a family member (child, spouse, etc.)"})]}),e.jsx("small",{className:"form-help",children:"Check this if the patient is a child or family member who shares contact information with another patient"})]}),t.isFamilyMember&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"familyHeadName",children:"Family Head Name"}),e.jsx("input",{type:"text",id:"familyHeadName",name:"familyHeadName",value:t.familyHeadName,onChange:x,placeholder:"Enter family head name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"familyHeadUHID",children:"Family Head UHID"}),e.jsx("input",{type:"text",id:"familyHeadUHID",name:"familyHeadUHID",value:t.familyHeadUHID,onChange:x,placeholder:"Enter family head UHID"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"relationshipToHead",children:"Relationship to Family Head *"}),e.jsxs("select",{id:"relationshipToHead",name:"relationshipToHead",value:t.relationshipToHead,onChange:x,required:t.isFamilyMember,children:[e.jsx("option",{value:"",children:"Select Relationship"}),e.jsx("option",{value:"Child",children:"Child"}),e.jsx("option",{value:"Spouse",children:"Spouse"}),e.jsx("option",{value:"Parent",children:"Parent"}),e.jsx("option",{value:"Sibling",children:"Sibling"}),e.jsx("option",{value:"Grandchild",children:"Grandchild"}),e.jsx("option",{value:"Grandparent",children:"Grandparent"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"â„¹ï¸ Additional Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:t.dateOfBirth,onChange:x})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"occupation",children:"Occupation"}),e.jsx("input",{type:"text",id:"occupation",name:"occupation",value:t.occupation,onChange:x,placeholder:"Enter occupation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"maritalStatus",children:"Marital Status"}),e.jsxs("select",{id:"maritalStatus",name:"maritalStatus",value:t.maritalStatus,onChange:x,children:[e.jsx("option",{value:"",children:"Select Marital Status"}),ae.map(N=>e.jsx("option",{value:N,children:N},N))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"guardianName",children:"Guardian Name"}),e.jsx("input",{type:"text",id:"guardianName",name:"guardianName",value:t.guardianName,onChange:x,placeholder:"Enter guardian name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"guardianRelation",children:"Guardian Relation"}),e.jsx("input",{type:"text",id:"guardianRelation",name:"guardianRelation",value:t.guardianRelation,onChange:x,placeholder:"e.g., Father, Mother, Spouse"})]})]})]})]})}),e.jsx("div",{className:"modal-footer form-actions",children:e.jsxs("div",{className:"modal-footer-actions",children:[e.jsx("div",{className:"form-actions-left",children:e.jsxs("div",{className:"family-member-note",children:[e.jsx("span",{className:"note-icon",children:"â„¹ï¸"}),e.jsx("span",{className:"note-text",children:s?"Mobile numbers cannot be changed for existing patients to maintain data integrity and prevent duplicate records.":"If this is a family member (child, spouse, etc.), the system will automatically suggest family registration when duplicate contact info is detected."})]})}),e.jsxs("div",{className:"form-actions-right",children:[e.jsx("button",{type:"button",className:"btn btn-default",onClick:h,disabled:b,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,disabled:b,children:b?"â³ Saving...":s?"ğŸ’¾ Update Patient":"âœ¨ Register Patient"})]})]})})]}),e.jsx(Ge,{isOpen:k,onClose:()=>{D(!1),u(null),T(null)},duplicates:A,onContinue:O,onViewExisting:v,onRegisterAsFamilyMember:J}),e.jsx(_e,{isOpen:f,onClose:()=>{I(!1),$(null)},familyHead:z,onRegister:Y})]})},Ge=({isOpen:r,onClose:h,duplicates:a,onContinue:s,onViewExisting:j,onRegisterAsFamilyMember:l})=>{if(!r||!a||a.length===0)return null;const t=()=>{s(),h()},n=o=>{j(o),h()};return e.jsx(ce,{isOpen:r,onClose:h,className:"duplicate-warning-modal",children:e.jsxs("div",{className:"modal-content-container",children:[e.jsx(de,{title:"Duplicate Patient Detected",icon:"âš ï¸",onClose:h,closeButtonText:"âœ•"}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"warning-message",children:e.jsxs("p",{children:["We found ",a.length," potential duplicate",a.length>1?"s":""," in our system:"]})}),e.jsx("div",{className:"duplicates-list",children:a.map((o,p)=>e.jsxs("div",{className:"duplicate-item",children:[e.jsxs("div",{className:"duplicate-info",children:[e.jsxs("div",{className:"duplicate-type",children:[o.type==="exact_duplicate"&&"âš ï¸ Exact Duplicate",o.type==="contact_match"&&"ğŸ“§ğŸ“± Contact Match",o.type==="email"&&"ğŸ“§ Email Match",o.type==="mobile"&&"ğŸ“± Mobile Match",o.type==="family_member_candidate"&&"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Member Candidate",o.type==="name_mobile"&&"ğŸ‘¤ Name + Mobile Match",o.type==="family_member_info"&&"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Member Info"]}),e.jsx("div",{className:"duplicate-message",children:o.message}),e.jsxs("div",{className:"existing-patient-info",children:[e.jsx("strong",{children:"Existing Patient:"})," ",o.existingPatient.name,e.jsxs("span",{className:"uhid",children:[" (UHID: ",o.existingPatient.uhid,")"]}),o.existingPatient.isFamilyMember&&e.jsxs("span",{className:"family-info",children:[" - ",o.existingPatient.relationshipToHead||"Family Member"]})]})]}),e.jsxs("div",{className:"duplicate-actions",children:[e.jsx(y,{variant:"default",size:"small",onClick:()=>n(o.existingPatient),children:"ğŸ‘ï¸ View Patient"}),o.canBeFamilyMember&&e.jsx(y,{variant:"success",size:"small",onClick:()=>l(o.existingPatient),children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Register as Family Member"})]})]},p))})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"modal-footer-actions",children:[e.jsxs("div",{className:"action-buttons",children:[e.jsx(y,{variant:"default",size:"medium",onClick:h,children:"Cancel Registration"}),e.jsx(y,{variant:"warning",size:"medium",onClick:t,children:"âš ï¸ Continue Anyway"})]}),e.jsxs("div",{className:"warning-note",children:[e.jsxs("p",{children:["âš ï¸ ",e.jsx("strong",{children:"Warning:"})," Creating duplicate patients can cause data inconsistencies and billing issues. Please review the existing patient information before proceeding."]}),a.some(o=>o.type==="contact_match")&&e.jsxs("p",{children:["ğŸ“§ğŸ“± ",e.jsx("strong",{children:"Contact Match:"})," Both email and phone number match an existing patient. This is likely the same person or a family member sharing contact information."]}),a.some(o=>o.type==="family_member_candidate")&&e.jsxs("p",{children:["ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ",e.jsx("strong",{children:"Family Member Option:"})," Different name with same phone number suggests this might be a family member. You can register them as a family member to share contact information."]}),a.some(o=>o.type==="exact_duplicate")&&e.jsxs("p",{children:["âš ï¸ ",e.jsx("strong",{children:"Exact Duplicate:"})," Same name and phone number indicates this is likely the same person. However, this could also be a family member (like father/son with same name). Please review carefully before proceeding."]}),a.some(o=>o.type==="family_member_info")&&e.jsxs("p",{children:["â„¹ï¸ ",e.jsx("strong",{children:"Note:"}),` Family members can share contact information. The "Family Member Info" entries are informational only and won't block registration.`]})]})]})})]})})},We=({isOpen:r,onClose:h,patient:a,onSuccess:s,existingVisit:j=null})=>{const[l,t]=c.useState({patientId:(a==null?void 0:a._id)||(a==null?void 0:a.id)||"",visitType:"OPD",chiefComplaint:"",symptoms:[],department:"General Medicine",appointmentDate:"",appointmentTime:"",priority:"Normal",notes:"",insuranceProvider:"",insuranceNumber:"",estimatedCost:"",doctorId:void 0,doctorName:""}),[n,o]=c.useState(!1),[p,b]=c.useState({}),[g,A]=c.useState(""),[u,k]=c.useState([]),[D,f]=c.useState(!1),I=["General Medicine","Cardiology","Orthopedics","Pediatrics","Gynecology","Dermatology","ENT","Ophthalmology","Emergency","Other"],z=["OPD","Emergency","Follow-up","Consultation","Procedure"],$=["Low","Normal","High","Emergency"],_=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00"];c.useEffect(()=>{j?t({patientId:j.patientId,visitType:j.visitType||"OPD",chiefComplaint:j.chiefComplaint||"",symptoms:j.symptoms||[],department:j.department||"General Medicine",appointmentDate:j.appointmentDate?j.appointmentDate.split("T")[0]:"",appointmentTime:j.appointmentTime||"",priority:j.priority||"Normal",notes:j.notes||"",insuranceProvider:j.insuranceProvider||"",insuranceNumber:j.insuranceNumber||"",estimatedCost:j.estimatedCost||"",doctorId:j.doctorId||void 0,doctorName:j.doctorName||""}):a&&t(i=>({...i,patientId:a._id||a.id}))},[a,j]),c.useEffect(()=>{(async()=>{if(!l.department){k([]);return}f(!0);try{const d=await be(l.department);d.data.success?k(d.data.data||[]):(console.error("Failed to fetch doctors:",d.data.message),k([]))}catch(d){console.error("Error fetching doctors:",d),k([])}finally{f(!1)}})()},[l.department]);const T=i=>{const{name:d,value:F}=i.target;d==="doctorId"&&(console.log("ğŸ” Doctor selected:",F),console.log("ğŸ” Available doctors:",u),console.log("ğŸ” Selected doctor object:",u.find(O=>O._id===F))),t(O=>{const v={...O,[d]:F};return d==="department"&&(v.doctorId=void 0,v.doctorName=""),d==="doctorId"&&console.log("ğŸ” Form data after doctor selection:",v),v}),p[d]&&b(O=>({...O,[d]:""}))},q=()=>{g.trim()&&!l.symptoms.includes(g.trim())&&(t(i=>({...i,symptoms:[...i.symptoms,g.trim()]})),A(""))},Z=i=>{t(d=>({...d,symptoms:d.symptoms.filter(F=>F!==i)}))},ee=()=>{const i={};if(l.chiefComplaint.trim()&&l.chiefComplaint.trim().length<5&&(i.chiefComplaint="Chief complaint must be at least 5 characters if provided"),!l.appointmentDate)i.appointmentDate="Appointment date is required";else{const d=new Date(l.appointmentDate),F=new Date;F.setHours(0,0,0,0),d<F&&(i.appointmentDate="Appointment date cannot be in the past")}return l.appointmentTime||(i.appointmentTime="Appointment time is required"),l.estimatedCost&&isNaN(l.estimatedCost)&&(i.estimatedCost="Estimated cost must be a valid number"),b(i),Object.keys(i).length===0},w=async i=>{var d,F;if(i.preventDefault(),!!ee()){o(!0),b({});try{let O,v;if(l.doctorId&&l.doctorId.trim()!==""&&l.doctorId!=="undefined")if(/^[0-9a-fA-F]{24}$/.test(l.doctorId)){O=l.doctorId;const se=u.find(K=>K._id===l.doctorId);se&&(v=se.name)}else console.error("âŒ Invalid doctorId format:",l.doctorId);const J={...l,appointmentDate:new Date(l.appointmentDate).toISOString(),estimatedCost:l.estimatedCost?parseFloat(l.estimatedCost):void 0,doctorId:O,doctorName:v};console.log("ğŸ” Visit data being sent:",J),console.log("ğŸ” Doctor ID value:",l.doctorId),console.log("ğŸ” Doctor ID type:",typeof l.doctorId),console.log("ğŸ” Doctor Name found:",v),console.log("ğŸ” Form data before processing:",l),console.log("ğŸ” Available doctors:",u);const Y=await Fe(J);Y.data.success&&(s==null||s(Y.data.data.visit),h(),t({patientId:(a==null?void 0:a._id)||(a==null?void 0:a.id)||"",visitType:"OPD",chiefComplaint:"",symptoms:[],department:"General Medicine",appointmentDate:"",appointmentTime:"",priority:"Normal",notes:"",insuranceProvider:"",insuranceNumber:"",estimatedCost:"",doctorId:"",doctorName:""}))}catch(O){console.error("Error creating visit:",O),b({submit:((F=(d=O.response)==null?void 0:d.data)==null?void 0:F.message)||"Failed to create visit. Please try again."})}finally{o(!1)}}},x=()=>{b({}),h()};return e.jsx(ce,{isOpen:r,onClose:h,className:"visit-booking-modal",children:e.jsxs("div",{className:"modal-content-container",children:[e.jsx(de,{title:j?"Edit Visit":"Book New Visit",icon:"ğŸ“…",onClose:x}),a&&e.jsx("div",{className:"patient-info-header",children:e.jsxs("span",{className:"patient-info",children:["for ",a.name," (",a.uhid,")"]})}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:w,className:"visit-booking-form",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"visitType",children:"Visit Type *"}),e.jsx("select",{id:"visitType",name:"visitType",value:l.visitType,onChange:T,className:p.visitType?"error":"",children:z.map(i=>e.jsx("option",{value:i,children:i},i))}),p.visitType&&e.jsx("span",{className:"error-message",children:p.visitType})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"department",children:"Department *"}),e.jsx("select",{id:"department",name:"department",value:l.department,onChange:T,className:p.department?"error":"",children:I.map(i=>e.jsx("option",{value:i,children:i},i))}),p.department&&e.jsx("span",{className:"error-message",children:p.department})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"priority",children:"Priority"}),e.jsx("select",{id:"priority",name:"priority",value:l.priority,onChange:T,children:$.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"appointmentDate",children:"Appointment Date *"}),e.jsx("input",{type:"date",id:"appointmentDate",name:"appointmentDate",value:l.appointmentDate,onChange:T,className:p.appointmentDate?"error":"",min:new Date().toISOString().split("T")[0]}),p.appointmentDate&&e.jsx("span",{className:"error-message",children:p.appointmentDate})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"appointmentTime",children:"Appointment Time *"}),e.jsxs("select",{id:"appointmentTime",name:"appointmentTime",value:l.appointmentTime,onChange:T,className:p.appointmentTime?"error":"",children:[e.jsx("option",{value:"",children:"Select Time"}),_.map(i=>e.jsx("option",{value:i,children:i},i))]}),p.appointmentTime&&e.jsx("span",{className:"error-message",children:p.appointmentTime})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"doctorId",children:"Doctor (Optional)"}),e.jsxs("select",{id:"doctorId",name:"doctorId",value:l.doctorId,onChange:T,disabled:D,className:p.doctorId?"error":"",children:[e.jsx("option",{value:"",children:"Select a doctor"}),u.map(i=>e.jsxs("option",{value:i._id,children:[i.name," - ",i.specialization," (",i.experience||"N/A",") - â‚¹",i.consultationFee||"N/A"]},i._id))]}),D&&e.jsx("div",{className:"loading-text",children:"Loading doctors..."}),p.doctorId&&e.jsx("span",{className:"error-message",children:p.doctorId})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"chiefComplaint",children:"Chief Complaint (Optional)"}),e.jsx("textarea",{id:"chiefComplaint",name:"chiefComplaint",value:l.chiefComplaint,onChange:T,className:p.chiefComplaint?"error":"",placeholder:"Describe the main reason for the visit...",rows:3}),p.chiefComplaint&&e.jsx("span",{className:"error-message",children:p.chiefComplaint})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Symptoms"}),e.jsxs("div",{className:"symptoms-container",children:[e.jsxs("div",{className:"symptom-input",children:[e.jsx("input",{type:"text",value:g,onChange:i=>A(i.target.value),placeholder:"Add symptom...",onKeyPress:i=>i.key==="Enter"&&(i.preventDefault(),q())}),e.jsx(y,{type:"button",variant:"primary",size:"small",onClick:q,children:"Add"})]}),l.symptoms.length>0&&e.jsx("div",{className:"symptoms-list",children:l.symptoms.map((i,d)=>e.jsxs("span",{className:"symptom-tag",children:[i,e.jsx("button",{type:"button",onClick:()=>Z(i),className:"remove-symptom",children:"Ã—"})]},d))})]})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"insuranceProvider",children:"Insurance Provider"}),e.jsx("input",{type:"text",id:"insuranceProvider",name:"insuranceProvider",value:l.insuranceProvider,onChange:T,placeholder:"Insurance company name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"insuranceNumber",children:"Insurance Number"}),e.jsx("input",{type:"text",id:"insuranceNumber",name:"insuranceNumber",value:l.insuranceNumber,onChange:T,placeholder:"Insurance policy number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"estimatedCost",children:"Estimated Cost (â‚¹)"}),e.jsx("input",{type:"number",id:"estimatedCost",name:"estimatedCost",value:l.estimatedCost,onChange:T,placeholder:"0",min:"0",step:"0.01",className:p.estimatedCost?"error":""}),p.estimatedCost&&e.jsx("span",{className:"error-message",children:p.estimatedCost})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"notes",children:"Additional Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:l.notes,onChange:T,placeholder:"Any additional information...",rows:2})]}),p.submit&&e.jsx("div",{className:"error-message submit-error",children:p.submit})]})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"modal-footer-actions",children:[e.jsx(y,{type:"button",variant:"default",onClick:x,disabled:n,children:"Cancel"}),e.jsx(y,{type:"button",variant:"primary",onClick:w,disabled:n,children:n?"Booking...":j?"Update Visit":"Book Visit"})]})})]})})},Je=({isOpen:r,onClose:h,onSuccess:a})=>{const[s,j]=c.useState({name:"",phone:"",email:"",password:"TempPass"+Math.floor(Math.random()*1e3),specialization:"",qualification:"",experience:"",consultationFee:"",availableDays:[],status:"active"}),[l,t]=c.useState(!1),[n,o]=c.useState({}),p=["General Medicine","Cardiology","Orthopedics","Pediatrics","Gynecology","Dermatology","ENT","Ophthalmology","Emergency Medicine","Neurology","Psychiatry","Other"],b=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],g=f=>{const{name:I,value:z}=f.target;j($=>({...$,[I]:z})),n[I]&&o($=>({...$,[I]:""}))},A=f=>{j(I=>({...I,availableDays:I.availableDays.includes(f)?I.availableDays.filter(z=>z!==f):[...I.availableDays,f]}))},u=()=>{const f={};return s.name.trim()||(f.name="Doctor name is required"),s.phone.trim()?/^\+?[\d\s-()]+$/.test(s.phone)||(f.phone="Please enter a valid phone number"):f.phone="Phone number is required",s.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&(f.email="Please enter a valid email address"),s.specialization||(f.specialization="Specialization is required"),s.qualification.trim()||(f.qualification="Qualification is required"),s.experience.trim()||(f.experience="Experience is required"),(!s.consultationFee||isNaN(s.consultationFee)||s.consultationFee<=0)&&(f.consultationFee="Please enter a valid consultation fee"),s.availableDays.length===0&&(f.availableDays="Please select at least one available day"),o(f),Object.keys(f).length===0},k=async f=>{if(f.preventDefault(),!!u()){t(!0),o({});try{const I={...s,consultationFee:parseFloat(s.consultationFee),experience:parseInt(s.experience),password:s.password},z=await Te(I);z.data.success?(a==null||a(z.data.data.doctor),D()):o({submit:z.data.message||"Failed to create doctor"})}catch(I){console.error("Error creating doctor:",I),o({submit:"Failed to create doctor. Please try again."})}finally{t(!1)}}},D=()=>{j({name:"",phone:"",email:"",password:"TempPass"+Math.floor(Math.random()*1e3),specialization:"",qualification:"",experience:"",consultationFee:"",availableDays:[],status:"active"}),o({}),h()};return e.jsx(ce,{isOpen:r,onClose:D,className:"add-doctor-modal",children:e.jsxs("div",{className:"modal-content-container",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"â• Add New Doctor"}),e.jsx("button",{className:"close-button",onClick:D,children:"Ã—"})]}),e.jsxs("form",{onSubmit:k,className:"add-doctor-form",children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Doctor Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:g,placeholder:"Enter doctor's full name",className:n.name?"error":""}),n.name&&e.jsx("span",{className:"error-message",children:n.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number *"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:g,placeholder:"+91 98765 43210",className:n.phone?"error":""}),n.phone&&e.jsx("span",{className:"error-message",children:n.phone})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address (Optional)"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:g,placeholder:"doctor@hospital.com",className:n.email?"error":""}),n.email&&e.jsx("span",{className:"error-message",children:n.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Temporary Password *"}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("input",{type:"text",id:"password",name:"password",value:s.password||"TempPass"+Math.floor(Math.random()*1e3),onChange:g,placeholder:"Temporary password",className:n.password?"error":"",readOnly:!0,style:{flex:1}}),e.jsx("button",{type:"button",onClick:()=>{const f="TempPass"+Math.floor(Math.random()*1e3);j(I=>({...I,password:f}))},style:{padding:"8px 12px",fontSize:"12px"},children:"ğŸ² Generate"})]}),e.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Doctor can change this password after first login"}),n.password&&e.jsx("span",{className:"error-message",children:n.password})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"specialization",children:"Specialization *"}),e.jsxs("select",{id:"specialization",name:"specialization",value:s.specialization,onChange:g,className:n.specialization?"error":"",children:[e.jsx("option",{value:"",children:"Select specialization"}),p.map(f=>e.jsx("option",{value:f,children:f},f))]}),n.specialization&&e.jsx("span",{className:"error-message",children:n.specialization})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"qualification",children:"Qualification *"}),e.jsx("input",{type:"text",id:"qualification",name:"qualification",value:s.qualification,onChange:g,placeholder:"MBBS, MD Medicine",className:n.qualification?"error":""}),n.qualification&&e.jsx("span",{className:"error-message",children:n.qualification})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"experience",children:"Experience (Years) *"}),e.jsx("input",{type:"number",id:"experience",name:"experience",value:s.experience,onChange:g,placeholder:"5",min:"0",max:"50",className:n.experience?"error":""}),n.experience&&e.jsx("span",{className:"error-message",children:n.experience})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"consultationFee",children:"Consultation Fee (â‚¹) *"}),e.jsx("input",{type:"number",id:"consultationFee",name:"consultationFee",value:s.consultationFee,onChange:g,placeholder:"1500",min:"0",className:n.consultationFee?"error":""}),n.consultationFee&&e.jsx("span",{className:"error-message",children:n.consultationFee})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{id:"status",name:"status",value:s.status,onChange:g,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Available Days *"}),e.jsx("div",{className:"days-grid",children:b.map(f=>e.jsxs("label",{className:"day-checkbox",children:[e.jsx("input",{type:"checkbox",checked:s.availableDays.includes(f),onChange:()=>A(f)}),e.jsx("span",{className:"day-label",children:f.charAt(0).toUpperCase()+f.slice(1)})]},f))}),n.availableDays&&e.jsx("span",{className:"error-message",children:n.availableDays})]}),n.submit&&e.jsx("div",{className:"error-message submit-error",children:n.submit})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"modal-footer-actions",children:[e.jsx(y,{type:"button",variant:"default",onClick:D,disabled:l,children:"Cancel"}),e.jsx(y,{type:"submit",variant:"primary",disabled:l,children:l?"Creating...":"Create Doctor"})]})})]})]})})},Qe=({isOpen:r,onClose:h,doctor:a,onApprove:s,onReject:j,isProcessing:l})=>{var p;if(!a)return null;const t=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=()=>{s(a._id),h()},o=()=>{j(a),h()};return e.jsx(ce,{isOpen:r,onClose:h,title:"ğŸ‘¨â€âš•ï¸ Doctor Profile Review",size:"large",children:e.jsxs("div",{className:"doctor-profile-content",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx("div",{className:"doctor-avatar-large",children:a.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"doctor-basic-info",children:[e.jsx("h2",{children:a.name}),e.jsx("p",{className:"doctor-email",children:a.email}),e.jsxs("p",{className:"doctor-phone",children:["ğŸ“ ",a.phone]}),e.jsx("div",{className:"specialization-badge-large",children:a.specialization})]})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"ğŸ“ Professional Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Qualification:"}),e.jsx("span",{children:a.qualification})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Experience:"}),e.jsxs("span",{children:[a.experience," years"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Consultation Fee:"}),e.jsxs("span",{children:["â‚¹",a.consultationFee]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Doctor ID:"}),e.jsx("span",{className:"doctor-id",children:a.doctorId})]})]})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"ğŸ“… Availability"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Available Days:"}),e.jsx("span",{children:((p=a.availableDays)==null?void 0:p.join(", "))||"Not specified"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Available Time:"}),e.jsx("span",{children:a.availableTime||"Not specified"})]})]})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"ğŸ“ Contact Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Phone Number:"}),e.jsx("span",{children:a.phone})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email Address:"}),e.jsx("span",{children:a.email})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Address:"}),e.jsx("span",{children:a.address||"Not provided"})]})]})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"ğŸ“‹ Additional Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Registration Date:"}),e.jsx("span",{children:t(a.createdAt)})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Status:"}),e.jsx("span",{className:`status-badge status-${a.status}`,children:a.status})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Tenant ID:"}),e.jsx("span",{children:a.tenantId})]})]})]}),a.bio&&e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"ğŸ“ Bio"}),e.jsx("div",{className:"bio-content",children:a.bio})]}),e.jsxs("div",{className:"profile-actions",children:[e.jsx(y,{onClick:n,variant:"success",size:"large",disabled:l,children:"âœ… Approve Doctor"}),e.jsx(y,{onClick:o,variant:"danger",size:"large",disabled:l,children:"âŒ Reject Doctor"}),e.jsx(y,{onClick:h,variant:"default",size:"large",disabled:l,children:"Close"})]})]})})},Ye=({isOpen:r,onClose:h,patient:a})=>{const[s,j]=c.useState([]),[l,t]=c.useState(!1),[n,o]=c.useState("");c.useEffect(()=>{r&&(a!=null&&a.id)&&p()},[r,a]);const p=async()=>{try{t(!0),o("");const u=await Re(a.id);u.data.success?j(u.data.data.records):o("Failed to load medical records. Please try again.")}catch(u){console.error("Error loading medical records:",u),o("Failed to load medical records. Please try again.")}finally{t(!1)}},b=u=>new Date(u).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),g=u=>({Consultation:"blue","Follow-up":"green",Emergency:"red","Lab Test":"purple",Imaging:"orange"})[u]||"gray",A=u=>{alert(`Downloading ${u}...`)};return a?e.jsx(ce,{isOpen:r,onClose:h,className:"medical-records-modal",children:e.jsxs("div",{className:"modal-content-container",children:[e.jsx(de,{title:"Medical Records",icon:"ğŸ“‹",onClose:h}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"patient-info-header",children:[e.jsxs("div",{className:"patient-basic-info",children:[e.jsx("h3",{children:a.name}),e.jsxs("p",{children:["UHID: ",a.uhid]}),e.jsxs("p",{children:["DOB: ",a.dob?b(a.dob):"Not provided"]})]}),e.jsxs("div",{className:"patient-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:s.length}),e.jsx("span",{className:"stat-label",children:"Total Records"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:s.filter(u=>u.type==="Emergency").length}),e.jsx("span",{className:"stat-label",children:"Emergency Visits"})]})]})]}),l&&e.jsx("div",{className:"loading-state",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading medical records..."})]})}),n&&e.jsx("div",{className:"error-state",children:e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"âš ï¸"}),e.jsx("p",{children:n}),e.jsx(y,{variant:"primary",size:"small",onClick:p,children:"Retry"})]})}),!l&&!n&&e.jsx("div",{className:"medical-records-list",children:s.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ğŸ“‹"}),e.jsx("h3",{children:"No Medical Records Found"}),e.jsx("p",{children:"This patient doesn't have any medical records yet."})]}):s.map(u=>{var k;return e.jsxs("div",{className:"medical-record-card",children:[e.jsxs("div",{className:"record-header",children:[e.jsxs("div",{className:"record-date",children:[e.jsx("span",{className:"date-icon",children:"ğŸ“…"}),e.jsx("span",{children:b(u.date)})]}),e.jsx("div",{className:`record-type type-${g(u.recordType)}`,children:u.recordType})]}),e.jsxs("div",{className:"record-content",children:[e.jsxs("div",{className:"record-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ğŸ‘¨â€âš•ï¸ Doctor:"}),e.jsx("span",{className:"info-value",children:((k=u.doctorId)==null?void 0:k.name)||"Dr. Unknown"})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ğŸ¥ Department:"}),e.jsx("span",{className:"info-value",children:u.department})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ğŸ” Diagnosis:"}),e.jsx("span",{className:"info-value",children:u.diagnosis})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ğŸ’Š Treatment:"}),e.jsx("span",{className:"info-value",children:u.treatment})]})]}),u.notes&&e.jsxs("div",{className:"record-notes",children:[e.jsx("span",{className:"notes-label",children:"ğŸ“ Notes:"}),e.jsx("p",{className:"notes-content",children:u.notes})]}),u.attachments&&u.attachments.length>0&&e.jsxs("div",{className:"record-attachments",children:[e.jsx("span",{className:"attachments-label",children:"ğŸ“ Attachments:"}),e.jsx("div",{className:"attachments-list",children:u.attachments.map((D,f)=>e.jsxs("button",{className:"attachment-item",onClick:()=>A(D.name||D),children:[e.jsx("span",{className:"attachment-icon",children:"ğŸ“„"}),e.jsx("span",{className:"attachment-name",children:D.name||D}),e.jsx("span",{className:"download-icon",children:"â¬‡ï¸"})]},f))})]}),u.vitalSigns&&e.jsxs("div",{className:"record-vitals",children:[e.jsx("span",{className:"vitals-label",children:"ğŸ©º Vital Signs:"}),e.jsxs("div",{className:"vitals-grid",children:[u.vitalSigns.bloodPressure&&e.jsxs("div",{className:"vital-item",children:[e.jsx("span",{className:"vital-label",children:"BP:"}),e.jsx("span",{className:"vital-value",children:u.vitalSigns.bloodPressure})]}),u.vitalSigns.heartRate&&e.jsxs("div",{className:"vital-item",children:[e.jsx("span",{className:"vital-label",children:"HR:"}),e.jsxs("span",{className:"vital-value",children:[u.vitalSigns.heartRate," bpm"]})]}),u.vitalSigns.temperature&&e.jsxs("div",{className:"vital-item",children:[e.jsx("span",{className:"vital-label",children:"Temp:"}),e.jsxs("span",{className:"vital-value",children:[u.vitalSigns.temperature,"Â°F"]})]}),u.vitalSigns.weight&&e.jsxs("div",{className:"vital-item",children:[e.jsx("span",{className:"vital-label",children:"Weight:"}),e.jsxs("span",{className:"vital-value",children:[u.vitalSigns.weight," kg"]})]})]})]}),u.medications&&u.medications.length>0&&e.jsxs("div",{className:"record-medications",children:[e.jsx("span",{className:"medications-label",children:"ğŸ’Š Medications:"}),e.jsx("div",{className:"medications-list",children:u.medications.map((D,f)=>e.jsxs("div",{className:"medication-item",children:[e.jsx("span",{className:"med-name",children:D.name}),e.jsxs("span",{className:"med-details",children:[D.dosage," - ",D.frequency]}),D.instructions&&e.jsx("span",{className:"med-instructions",children:D.instructions})]},f))})]})]})]},u._id)})})]}),e.jsx("div",{className:"modal-footer",children:e.jsx(y,{variant:"secondary",size:"medium",onClick:h,children:"Close"})})]})}):null},Ze=({onBack:r})=>{const[h,a]=c.useState(""),[s,j]=c.useState(""),[l,t]=c.useState(""),[n,o]=c.useState([]),[p,b]=c.useState(1),[g,A]=c.useState("name"),[u,k]=c.useState("asc"),[D,f]=c.useState(null),[I,z]=c.useState(!1),[$,_]=c.useState(!1),[T,q]=c.useState([{id:1,name:"John Doe",email:"john@example.com",role:"patient",status:"active",lastLogin:"2 hours ago",registrationDate:"2024-01-15",phone:"+91 98765 43210"},{id:2,name:"Dr. Sarah Smith",email:"sarah@hospital.com",role:"doctor",status:"active",lastLogin:"1 hour ago",registrationDate:"2024-01-10",phone:"+91 98765 43211"},{id:3,name:"Mike Johnson",email:"mike@example.com",role:"patient",status:"pending",lastLogin:"Never",registrationDate:"2024-01-20",phone:"+91 98765 43212"},{id:4,name:"Lisa Wilson",email:"lisa@hospital.com",role:"nurse",status:"active",lastLogin:"30 minutes ago",registrationDate:"2024-01-12",phone:"+91 98765 43213"},{id:5,name:"David Brown",email:"david@example.com",role:"receptionist",status:"active",lastLogin:"15 minutes ago",registrationDate:"2024-01-08",phone:"+91 98765 43214"},{id:6,name:"Emma Davis",email:"emma@hospital.com",role:"admin",status:"active",lastLogin:"5 minutes ago",registrationDate:"2024-01-05",phone:"+91 98765 43215"},{id:7,name:"Robert Wilson",email:"robert@example.com",role:"patient",status:"suspended",lastLogin:"1 day ago",registrationDate:"2024-01-18",phone:"+91 98765 43216"},{id:8,name:"Dr. Jennifer Lee",email:"jennifer@hospital.com",role:"doctor",status:"pending",lastLogin:"Never",registrationDate:"2024-01-22",phone:"+91 98765 43217"},{id:9,name:"Maria Garcia",email:"maria@hospital.com",role:"nurse",status:"active",lastLogin:"45 minutes ago",registrationDate:"2024-01-14",phone:"+91 98765 43218"},{id:10,name:"James Taylor",email:"james@example.com",role:"patient",status:"active",lastLogin:"3 hours ago",registrationDate:"2024-01-16",phone:"+91 98765 43219"}]),Z=[{value:"",label:"All Roles"},{value:"admin",label:"Admin"},{value:"doctor",label:"Doctor"},{value:"nurse",label:"Nurse"},{value:"receptionist",label:"Receptionist"},{value:"patient",label:"Patient"}],ee=[{value:"",label:"All Status"},{value:"active",label:"Active"},{value:"pending",label:"Pending"},{value:"suspended",label:"Suspended"}],w=c.useMemo(()=>{let m=T.filter(R=>{const C=R.name.toLowerCase().includes(h.toLowerCase())||R.email.toLowerCase().includes(h.toLowerCase()),E=!s||R.role===s,V=!l||R.status===l;return C&&E&&V});return m.sort((R,C)=>{let E=R[g],V=C[g];if(g==="lastLogin"){const ie={Never:0,"5 minutes ago":1,"15 minutes ago":2,"30 minutes ago":3,"45 minutes ago":4,"1 hour ago":5,"2 hours ago":6,"3 hours ago":7,"1 day ago":8};E=ie[E]||9,V=ie[V]||9}return typeof E=="string"&&(E=E.toLowerCase(),V=V.toLowerCase()),u==="asc"?E>V?1:-1:E<V?1:-1}),m},[T,h,s,l,g,u]),x=5,i=Math.ceil(w.length/x),d=(p-1)*x,F=w.slice(d,d+x),O=m=>{g===m?k(u==="asc"?"desc":"asc"):(A(m),k("asc"))},v=m=>{o(R=>R.includes(m)?R.filter(C=>C!==m):[...R,m])},J=()=>{n.length===F.length?o([]):o(F.map(m=>m.id))},Y=(m,R)=>{const C=T.find(V=>V.id===m),E=(C==null?void 0:C.name)||"User";f({isOpen:!0,title:`Confirm ${R.charAt(0).toUpperCase()+R.slice(1)}`,message:`Are you sure you want to ${R} ${E}?`,confirmText:R.charAt(0).toUpperCase()+R.slice(1),variant:R==="delete"?"danger":R==="suspend"?"warning":"info",onConfirm:()=>K(m,R)})},se=m=>{n.map(R=>{var C;return(C=T.find(E=>E.id===R))==null?void 0:C.name}).join(", "),f({isOpen:!0,title:`Confirm Bulk ${m.charAt(0).toUpperCase()+m.slice(1)}`,message:`Are you sure you want to ${m} ${n.length} selected users?`,confirmText:m.charAt(0).toUpperCase()+m.slice(1),variant:m==="delete"?"danger":m==="suspend"?"warning":"info",onConfirm:()=>ae(m)})},K=async(m,R)=>{z(!0);try{await new Promise(C=>setTimeout(C,1e3)),R==="delete"?q(C=>C.filter(E=>E.id!==m)):R==="suspend"?q(C=>C.map(E=>E.id===m?{...E,status:"suspended"}:E)):R==="approve"&&q(C=>C.map(E=>E.id===m?{...E,status:"active"}:E)),o(C=>C.filter(E=>E!==m))}catch(C){console.error("Error executing user action:",C)}finally{z(!1),f(null)}},ae=async m=>{z(!0);try{await new Promise(R=>setTimeout(R,1500)),m==="delete"?q(R=>R.filter(C=>!n.includes(C.id))):m==="suspend"?q(R=>R.map(C=>n.includes(C.id)?{...C,status:"suspended"}:C)):m==="approve"&&q(R=>R.map(C=>n.includes(C.id)?{...C,status:"active"}:C)),o([])}catch(R){console.error("Error executing bulk action:",R)}finally{z(!1),f(null)}},N=m=>({admin:"blue",doctor:"green",nurse:"orange",receptionist:"purple",patient:"gray"})[m]||"gray",L=m=>({active:"green",pending:"yellow",suspended:"red"})[m]||"gray",G=()=>{_(!$),$&&o([])},Q=m=>{$||(console.log("User clicked:",m),alert(`User Details:
Name: ${m.name}
Email: ${m.email}
Phone: ${m.phone}
Role: ${m.role}
Status: ${m.status}
Last Login: ${m.lastLogin}`))},P=({field:m})=>g!==m?e.jsx("span",{className:"sort-icon",children:"â†•ï¸"}):e.jsx("span",{className:"sort-icon",children:u==="asc"?"â†‘":"â†“"});return e.jsxs("div",{className:"user-management-table",children:[e.jsxs("div",{className:"user-mgmt-header",children:[e.jsxs("div",{className:"header-left",children:[r&&e.jsx(y,{variant:"default",size:"small",onClick:r,children:"â† Back"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"ğŸ‘¥ User Management"}),e.jsx("p",{children:"Manage system users and their permissions"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx(y,{variant:$?"primary":"default",size:"medium",onClick:G,children:$?"âœ… Exit Edit Mode":"âœï¸ Edit Mode"}),e.jsx(y,{variant:"default",size:"medium",children:"â• Add New User"}),e.jsx(y,{variant:"default",size:"medium",children:"ğŸ“¤ Export Users"})]})]}),e.jsxs("div",{className:"user-mgmt-filters",children:[e.jsxs("div",{className:"filters-left",children:[e.jsx(ve,{value:h,onChange:a,placeholder:"Search users by name or email...",className:"user-search"}),e.jsx(pe,{options:Z,value:s,onChange:j,placeholder:"Filter by role"}),e.jsx(pe,{options:ee,value:l,onChange:t,placeholder:"Filter by status"})]}),e.jsx("div",{className:"filters-right",children:e.jsxs("div",{className:"results-count",children:[w.length," of ",T.length," users"]})})]}),$&&n.length>0&&e.jsxs("div",{className:"bulk-actions",children:[e.jsx("div",{className:"bulk-info",children:e.jsxs("span",{children:[n.length," user",n.length>1?"s":""," selected"]})}),e.jsxs("div",{className:"bulk-buttons",children:[e.jsx(y,{variant:"default",size:"small",onClick:()=>se("approve"),children:"âœ… Approve Selected"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>se("suspend"),children:"â¸ï¸ Suspend Selected"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>se("delete"),children:"ğŸ—‘ï¸ Delete Selected"})]})]}),e.jsx("div",{className:"users-table-container",children:e.jsxs("div",{className:"users-table",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell checkbox-cell",children:$&&e.jsx("input",{type:"checkbox",checked:n.length===F.length&&F.length>0,onChange:J})}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>O("name"),children:["Name ",e.jsx(P,{field:"name"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>O("role"),children:["Role ",e.jsx(P,{field:"role"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>O("status"),children:["Status ",e.jsx(P,{field:"status"})]}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),F.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ğŸ‘¥"}),e.jsx("h3",{children:"No users found"}),e.jsx("p",{children:"Try adjusting your search or filter criteria"})]}):F.map(m=>e.jsxs("div",{className:"table-row",onClick:()=>Q(m),children:[e.jsx("div",{className:"table-cell checkbox-cell",onClick:R=>R.stopPropagation(),children:$&&e.jsx("input",{type:"checkbox",checked:n.includes(m.id),onChange:()=>v(m.id)})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-avatar",children:e.jsx("div",{className:"avatar-circle",children:m.name.charAt(0)})}),e.jsxs("div",{className:"user-details",children:[e.jsx("span",{className:"user-name",children:m.name}),e.jsx("span",{className:"user-phone",children:m.phone})]})]})}),e.jsx("div",{className:"table-cell",children:e.jsx(me,{status:m.role,variant:N(m.role),size:"small"})}),e.jsx("div",{className:"table-cell",children:e.jsx(me,{status:m.status,variant:L(m.status),size:"small"})}),e.jsx("div",{className:"table-cell",onClick:R=>R.stopPropagation(),children:!$&&e.jsxs("div",{className:"action-buttons",children:[m.status==="pending"&&e.jsx(y,{variant:"default",size:"small",onClick:()=>Y(m.id,"approve"),children:"âœ… Approve"}),m.status!=="suspended"&&e.jsx(y,{variant:"default",size:"small",onClick:()=>Y(m.id,"suspend"),children:"â¸ï¸ Suspend"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>Y(m.id,"delete"),children:"ğŸ—‘ï¸ Delete"})]})})]},m.id))]})}),i>1&&e.jsx(ge,{currentPage:p,totalPages:i,onPageChange:b,totalItems:w.length,itemsPerPage:x}),D&&e.jsx(Ne,{isOpen:D.isOpen,onClose:()=>f(null),onConfirm:D.onConfirm,title:D.title,message:D.message,confirmText:D.confirmText,variant:D.variant}),I&&e.jsx("div",{className:"loading-overlay",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Processing..."})]})})]})},Ke=()=>{const[r,h]=c.useState(""),[a,s]=c.useState("Active"),[j,l]=c.useState([]),[t,n]=c.useState(1),[o,p]=c.useState("registrationDate"),[b,g]=c.useState("desc"),[A,u]=c.useState(!1),[k,D]=c.useState(null),[f,I]=c.useState(!1),[z,$]=c.useState(null),[_,T]=c.useState(!1),[q,Z]=c.useState(!1),[ee,w]=c.useState(null),[x,i]=c.useState(!1),[d,F]=c.useState(null),[O,v]=c.useState(!1),[J,Y]=c.useState(null),[se,K]=c.useState([]),[ae,N]=c.useState({currentPage:1,totalPages:1,totalPatients:0,hasNext:!1,hasPrev:!1}),L=async()=>{var M;console.log("ğŸ”„ fetchPatients called with params:",{page:t,limit:5,status:a||"Active",search:r,sortBy:o,sortOrder:b}),I(!0);try{const B=await Ie({page:t,limit:5,status:a||"Active",search:r,sortBy:o,sortOrder:b});B.data.success?(K(B.data.data.patients||[]),N(B.data.data.pagination||{currentPage:1,totalPages:1,totalPatients:0,hasNext:!1,hasPrev:!1}),console.log("âœ… Fetched patients from database:",((M=B.data.data.patients)==null?void 0:M.length)||0,"patients"),console.log("ğŸ“Š Pagination info:",B.data.data.pagination)):(console.warn("âš ï¸ API returned unsuccessful response:",B.data.message),K([]),N({currentPage:1,totalPages:1,totalPatients:0,hasNext:!1,hasPrev:!1}))}catch(B){console.error("âŒ Error fetching patients from database:",B),K([]),N({currentPage:1,totalPages:1,totalPatients:0,hasNext:!1,hasPrev:!1})}finally{I(!1)}};c.useEffect(()=>{console.log("ğŸ”„ useEffect triggered, calling fetchPatients"),L()},[t,a,r,o,b]);const G=M=>{console.log("Visit booked successfully:",M),i(!1),F(null)},Q=()=>{i(!1),F(null)},P=[{value:"",label:"All Status"},{value:"Active",label:"Active"},{value:"Pending",label:"Pending"},{value:"Inactive",label:"Inactive"}],m=se,R=M=>{o===M?g(b==="asc"?"desc":"asc"):(p(M),g("asc"))},C=M=>{l(B=>B.includes(M)?B.filter(W=>W!==M):[...B,M])},E=()=>{j.length===m.length?l([]):l(m.map(M=>M._id||M.id))},V=()=>{u(!A),A&&l([])},ie=(M,B)=>{const W=se.find(ue=>(ue._id||ue.id)===M);W!=null&&W.name;{$(W),T(!0);return}},ne=M=>{j.map(B=>{var W;return(W=se.find(ue=>ue.id===B))==null?void 0:W.name}).join(", "),D({isOpen:!0,title:`Confirm Bulk ${M.charAt(0).toUpperCase()+M.slice(1)}`,message:`Are you sure you want to ${M} ${j.length} selected patients?`,confirmText:M.charAt(0).toUpperCase()+M.slice(1),variant:M==="delete"?"danger":M==="deactivate"?"warning":"info",onConfirm:()=>re(M)})},re=async M=>{I(!0);try{await new Promise(B=>setTimeout(B,1500)),M==="delete"?K(B=>B.filter(W=>!j.includes(W.id))):M==="deactivate"?K(B=>B.map(W=>j.includes(W.id)?{...W,status:"Inactive"}:W)):M==="approve"&&K(B=>B.map(W=>j.includes(W.id)?{...W,status:"Active"}:W)),l([])}catch(B){console.error("Error executing bulk action:",B)}finally{I(!1),D(null)}},S=M=>({active:"green",pending:"yellow",inactive:"red"})[M]||"gray",H=M=>{T(!1),w(M),Z(!0)},U=M=>{T(!1),F(M),i(!0),console.log("ğŸ“… Opening visit booking form for:",M.name)},X=M=>{T(!1),Y(M),v(!0)},le=M=>{T(!1),console.log("Send message to:",M),alert(`Send Message to: ${M.name}
This will open the communication form.`)},we=async M=>{try{await L(),w(null),Z(!1),M&&(M._id||M.id)?($(M),T(!0),console.log("âœ… Patient saved successfully, opening patient details for appointment booking")):console.log("âœ… Patient saved successfully, list refreshed from database")}catch(B){throw console.error("âŒ Error saving patient:",B),B}},fe=()=>{w(null),Z(!0)},je=({field:M})=>o!==M?e.jsx("span",{className:"sort-icon",children:"â†•ï¸"}):e.jsx("span",{className:"sort-icon",children:b==="asc"?"â†‘":"â†“"});return e.jsxs("div",{className:"enhanced-patient-management",children:[e.jsxs("div",{className:"patient-mgmt-header",children:[e.jsx("div",{className:"header-left",children:e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"ğŸ¥ Patient Management"}),e.jsx("p",{children:"Manage patient records and medical information"})]})}),e.jsxs("div",{className:"header-actions",children:[e.jsx(y,{variant:A?"primary":"default",size:"medium",onClick:V,children:A?"âœ… Done Editing":"âœï¸ Edit Mode"}),e.jsx(y,{variant:"default",size:"medium",onClick:fe,children:"â• Add New Patient"}),e.jsx(y,{variant:"default",size:"medium",children:"ğŸ“¤ Export Patients"})]})]}),e.jsxs("div",{className:"patient-mgmt-filters",children:[e.jsxs("div",{className:"filters-left",children:[e.jsx(ve,{value:r,onChange:h,placeholder:"Search patients by name, email, UHID, or mobile...",className:"patient-search"}),e.jsx(pe,{options:P,value:a,onChange:s,placeholder:"Filter by status"})]}),e.jsx("div",{className:"filters-right",children:e.jsxs("div",{className:"results-count",children:[ae.totalPatients," patients"]})})]}),A&&j.length>0&&e.jsxs("div",{className:"bulk-actions",children:[e.jsx("div",{className:"bulk-info",children:e.jsxs("span",{children:[j.length," patient",j.length>1?"s":""," selected"]})}),e.jsxs("div",{className:"bulk-buttons",children:[e.jsx(y,{variant:"default",size:"small",onClick:()=>ne("approve"),children:"âœ… Approve Selected"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>ne("deactivate"),children:"â¸ï¸ Deactivate Selected"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>ne("delete"),children:"ğŸ—‘ï¸ Delete Selected"})]})]}),e.jsx("div",{className:"patients-table-container",children:e.jsxs("div",{className:"patients-table",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell checkbox-cell",children:A&&e.jsx("input",{type:"checkbox",checked:j.length===m.length&&m.length>0,onChange:E})}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>R("name"),children:["Patient ",e.jsx(je,{field:"name"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>R("uhid"),children:["UHID ",e.jsx(je,{field:"uhid"})]}),e.jsx("div",{className:"table-cell",children:"Contact"}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>R("registrationDate"),children:["Registered ",e.jsx(je,{field:"registrationDate"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>R("status"),children:["Status ",e.jsx(je,{field:"status"})]})]}),m.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ğŸ¥"}),e.jsx("h3",{children:ae.totalPatients===0?"No patients in database":"No patients found"}),e.jsx("p",{children:ae.totalPatients===0?'Start by adding your first patient using the "Add New Patient" button above.':"Try adjusting your search or filter criteria"}),ae.totalPatients===0&&e.jsx(y,{variant:"primary",size:"medium",onClick:fe,style:{marginTop:"16px"},children:"â• Add Your First Patient"})]}):m.map(M=>{const B=M._id||M.id;return e.jsxs("div",{className:`table-row ${A?"":"clickable-row"}`,onClick:()=>!A&&ie(B),children:[e.jsx("div",{className:"table-cell checkbox-cell",onClick:W=>W.stopPropagation(),children:A&&e.jsx("input",{type:"checkbox",checked:j.includes(B),onChange:()=>C(B)})}),e.jsx("div",{className:"table-cell",children:e.jsx("div",{className:"patient-info",children:e.jsxs("div",{className:"patient-details",children:[e.jsx("span",{className:"patient-name",children:M.name}),M.email&&e.jsx("span",{className:"patient-email",children:M.email})]})})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"uhid-badge",children:M.uhid})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"contact-info",children:[e.jsx("span",{className:"mobile",children:M.mobile}),e.jsxs("span",{className:"emergency-contact",children:["Emergency: ",M.emergencyContact]})]})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"registration-date",children:[e.jsx("span",{className:"date",children:(()=>{const W=M.registrationDate||M.createdAt||M._id;return W?typeof W=="string"&&/^\d{13}$/.test(W)?new Date(parseInt(W)).toLocaleDateString("en-IN"):new Date(W).toLocaleDateString("en-IN"):new Date().toLocaleDateString("en-IN")})()}),e.jsx("span",{className:"time",children:(()=>{const W=M.registrationDate||M.createdAt||M._id;return W?typeof W=="string"&&/^\d{13}$/.test(W)?new Date(parseInt(W)).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):new Date(W).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})()})]})}),e.jsx("div",{className:"table-cell",children:e.jsx(me,{status:M.status,variant:S(M.status),size:"small"})})]},B)})]})}),ae.totalPages>=1&&e.jsx(ge,{currentPage:ae.currentPage,totalPages:ae.totalPages,onPageChange:n,totalItems:ae.totalPatients,itemsPerPage:5}),k&&e.jsx(Ne,{isOpen:k.isOpen,onClose:()=>D(null),onConfirm:k.onConfirm,title:k.title,message:k.message,confirmText:k.confirmText,variant:k.variant}),f&&e.jsx("div",{className:"loading-overlay",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Processing..."})]})}),e.jsx(Oe,{isOpen:_,onClose:()=>T(!1),patient:z,onEdit:H,onBookAppointment:U,onViewRecords:X,onSendMessage:le}),e.jsx(qe,{isOpen:q,onClose:()=>{console.log("PatientRegistrationForm onClose called"),Z(!1),w(null)},onSave:we,existingPatient:ee,existingPatients:se}),e.jsx(We,{isOpen:x,onClose:Q,patient:d,onSuccess:G}),e.jsx(Ye,{isOpen:O,onClose:()=>{v(!1),Y(null)},patient:J})]})},Xe=({onBack:r})=>{const[h,a]=c.useState(""),[s,j]=c.useState(""),[l,t]=c.useState(""),[n,o]=c.useState([]),[p,b]=c.useState(1),[g,A]=c.useState("name"),[u,k]=c.useState("asc"),[D,f]=c.useState("grid"),[I,z]=c.useState(!1),[$,_]=c.useState(null),[T,q]=c.useState(!1),[Z,ee]=c.useState(!1),[w,x]=c.useState([]),[i,d]=c.useState(!0),[F,O]=c.useState(null);c.useEffect(()=>{v()},[]);const v=async()=>{try{d(!0),O(null);const S=await Ee();S.data.success?x(S.data.data||[]):O("Failed to load doctors")}catch(S){console.error("Error loading doctors:",S),O("Failed to load doctors")}finally{d(!1)}},J=S=>{console.log("âœ… Doctor created successfully:",S),ee(!1)},Y=[{value:"",label:"All Specializations"},{value:"Cardiology",label:"Cardiology"},{value:"General Medicine",label:"General Medicine"},{value:"Pediatrics",label:"Pediatrics"},{value:"Orthopedics",label:"Orthopedics"},{value:"Dermatology",label:"Dermatology"},{value:"Neurology",label:"Neurology"},{value:"Gynecology",label:"Gynecology"},{value:"Psychiatry",label:"Psychiatry"},{value:"Ophthalmology",label:"Ophthalmology"},{value:"ENT",label:"ENT"}],se=[{value:"",label:"All Status"},{value:"active",label:"Active"},{value:"pending",label:"Pending"},{value:"inactive",label:"Inactive"}],K=c.useMemo(()=>{let S=w.filter(H=>{const U=H.name.toLowerCase().includes(h.toLowerCase())||H.specialization.toLowerCase().includes(h.toLowerCase())||H.email.toLowerCase().includes(h.toLowerCase()),X=!s||H.specialization===s,le=!l||H.status===l;return U&&X&&le});return S.sort((H,U)=>{let X=H[g],le=U[g];return g==="experience"&&(X=parseInt(H.experience),le=parseInt(U.experience)),typeof X=="string"&&(X=X.toLowerCase(),le=le.toLowerCase()),u==="asc"?X>le?1:-1:X<le?1:-1}),S},[w,h,s,l,g,u]),ae=D==="grid"?6:5,N=Math.ceil(K.length/ae),L=(p-1)*ae,G=K.slice(L,L+ae),Q=S=>{g===S?k(u==="asc"?"desc":"asc"):(A(S),k("asc"))},P=S=>{o(H=>H.includes(S)?H.filter(U=>U!==S):[...H,S])},m=()=>{n.length===G.length?o([]):o(G.map(S=>S.id))},R=()=>{z(!I),I&&o([])},C=(S,H)=>{const U=w.find(le=>le.id===S),X=(U==null?void 0:U.name)||"Doctor";_({isOpen:!0,title:`Confirm ${H.charAt(0).toUpperCase()+H.slice(1)}`,message:`Are you sure you want to ${H} ${X}?`,confirmText:H.charAt(0).toUpperCase()+H.slice(1),variant:H==="delete"?"danger":H==="deactivate"?"warning":"info",onConfirm:()=>V(S,H)})},E=S=>{n.map(H=>{var U;return(U=w.find(X=>X.id===H))==null?void 0:U.name}).join(", "),_({isOpen:!0,title:`Confirm Bulk ${S.charAt(0).toUpperCase()+S.slice(1)}`,message:`Are you sure you want to ${S} ${n.length} selected doctors?`,confirmText:S.charAt(0).toUpperCase()+S.slice(1),variant:S==="delete"?"danger":S==="deactivate"?"warning":"info",onConfirm:()=>ie(S)})},V=async(S,H)=>{q(!0);try{await new Promise(U=>setTimeout(U,1e3)),H==="delete"?x(U=>U.filter(X=>X.id!==S)):H==="deactivate"?x(U=>U.map(X=>X.id===S?{...X,status:"inactive"}:X)):H==="approve"&&x(U=>U.map(X=>X.id===S?{...X,status:"active"}:X)),o(U=>U.filter(X=>X!==S))}catch(U){console.error("Error executing doctor action:",U)}finally{q(!1),_(null)}},ie=async S=>{q(!0);try{await new Promise(H=>setTimeout(H,1500)),S==="delete"?x(H=>H.filter(U=>!n.includes(U.id))):S==="deactivate"?x(H=>H.map(U=>n.includes(U.id)?{...U,status:"inactive"}:U)):S==="approve"&&x(H=>H.map(U=>n.includes(U.id)?{...U,status:"active"}:U)),o([])}catch(H){console.error("Error executing bulk action:",H)}finally{q(!1),_(null)}},ne=S=>({active:"green",pending:"yellow",inactive:"red"})[S]||"gray",re=({field:S})=>g!==S?e.jsx("span",{className:"sort-icon",children:"â†•ï¸"}):e.jsx("span",{className:"sort-icon",children:u==="asc"?"â†‘":"â†“"});return e.jsxs("div",{className:"enhanced-doctor-management",children:[e.jsxs("div",{className:"doctor-mgmt-header",children:[e.jsxs("div",{className:"header-left",children:[r&&e.jsx(y,{variant:"default",size:"small",onClick:r,children:"â† Back"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"ğŸ‘¨â€âš•ï¸ Doctor Management"}),e.jsx("p",{children:"Manage doctor profiles and specializations"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx(y,{variant:I?"primary":"default",size:"medium",onClick:R,children:I?"âœ… Done Editing":"âœï¸ Edit Mode"}),e.jsx(y,{variant:"primary",size:"medium",onClick:()=>ee(!0),children:"â• Add New Doctor"}),e.jsx(y,{variant:"default",size:"medium",children:"ğŸ“¤ Export Doctors"})]})]}),e.jsxs("div",{className:"doctor-mgmt-filters",children:[e.jsxs("div",{className:"filters-left",children:[e.jsx(ve,{value:h,onChange:a,placeholder:"Search doctors by name, specialization, or email...",className:"doctor-search"}),e.jsx(pe,{options:Y,value:s,onChange:j,placeholder:"Filter by specialization"}),e.jsx(pe,{options:se,value:l,onChange:t,placeholder:"Filter by status"})]}),e.jsxs("div",{className:"filters-right",children:[e.jsxs("div",{className:"view-toggle",children:[e.jsx(y,{variant:D==="grid"?"primary":"default",size:"large",onClick:()=>f("grid"),children:"âŠ"}),e.jsx(y,{variant:D==="table"?"primary":"default",size:"large",onClick:()=>f("table"),children:"â˜°"})]}),e.jsxs("div",{className:"results-count",children:[K.length," of ",w.length," doctors"]})]})]}),I&&n.length>0&&e.jsxs("div",{className:"bulk-actions",children:[e.jsx("div",{className:"bulk-info",children:e.jsxs("span",{children:[n.length," doctor",n.length>1?"s":""," selected"]})}),e.jsxs("div",{className:"bulk-buttons",children:[e.jsx(y,{variant:"default",size:"small",onClick:()=>E("approve"),children:"âœ… Approve Selected"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>E("deactivate"),children:"â¸ï¸ Deactivate Selected"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>E("delete"),children:"ğŸ—‘ï¸ Delete Selected"})]})]}),i&&e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner",children:"â³"}),e.jsx("p",{children:"Loading doctors..."})]}),F&&!i&&e.jsxs("div",{className:"error-state",children:[e.jsx("div",{className:"error-icon",children:"âŒ"}),e.jsx("h3",{children:"Error Loading Doctors"}),e.jsx("p",{children:F}),e.jsx(y,{variant:"primary",onClick:v,children:"ğŸ”„ Retry"})]}),!i&&!F&&D==="grid"?e.jsx("div",{className:"doctors-grid-container",children:G.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ğŸ‘¨â€âš•ï¸"}),e.jsx("h3",{children:"No doctors found"}),e.jsx("p",{children:"Try adjusting your search or filter criteria"})]}):e.jsx("div",{className:"doctors-grid",children:G.map(S=>e.jsxs("div",{className:"doctor-card-wrapper",children:[I&&e.jsx("input",{type:"checkbox",checked:n.includes(S.id),onChange:()=>P(S.id),className:"doctor-checkbox"}),e.jsx(He,{doctor:S,onAction:C,showActions:!I})]},S.id))})}):!i&&!F?e.jsx("div",{className:"doctors-table-container",children:e.jsxs("div",{className:"doctors-table",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell checkbox-cell",children:e.jsx("input",{type:"checkbox",checked:n.length===G.length&&G.length>0,onChange:m})}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>Q("name"),children:["Doctor ",e.jsx(re,{field:"name"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>Q("specialization"),children:["Specialization ",e.jsx(re,{field:"specialization"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>Q("experience"),children:["Experience ",e.jsx(re,{field:"experience"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>Q("patients"),children:["Patients ",e.jsx(re,{field:"patients"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>Q("rating"),children:["Rating ",e.jsx(re,{field:"rating"})]}),e.jsxs("div",{className:"table-cell sortable",onClick:()=>Q("status"),children:["Status ",e.jsx(re,{field:"status"})]}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),G.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ğŸ‘¨â€âš•ï¸"}),e.jsx("h3",{children:"No doctors found"}),e.jsx("p",{children:"Try adjusting your search or filter criteria"})]}):G.map(S=>e.jsxs("div",{className:"table-row",children:[e.jsx("div",{className:"table-cell checkbox-cell",children:e.jsx("input",{type:"checkbox",checked:n.includes(S.id),onChange:()=>P(S.id)})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"doctor-info",children:[e.jsx(Ve,{name:S.name,size:"small"}),e.jsxs("div",{className:"doctor-details",children:[e.jsx("span",{className:"doctor-name",children:S.name}),e.jsx("span",{className:"doctor-email",children:S.email})]})]})}),e.jsx("div",{className:"table-cell",children:S.specialization}),e.jsx("div",{className:"table-cell",children:S.experience}),e.jsx("div",{className:"table-cell",children:S.patients}),e.jsx("div",{className:"table-cell",children:e.jsx("div",{className:"rating-info",children:e.jsxs("span",{className:"rating",children:["â­ ",S.rating]})})}),e.jsx("div",{className:"table-cell",children:e.jsx(me,{status:S.status,variant:ne(S.status),size:"small"})}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"action-buttons",children:[S.status==="pending"&&e.jsx(y,{variant:"default",size:"small",onClick:()=>C(S.id,"approve"),children:"âœ… Approve"}),S.status!=="inactive"&&e.jsx(y,{variant:"default",size:"small",onClick:()=>C(S.id,"deactivate"),children:"â¸ï¸ Deactivate"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>C(S.id,"view"),children:"ğŸ‘ï¸ View Profile"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>C(S.id,"edit"),children:"âœï¸ Edit"}),e.jsx(y,{variant:"default",size:"small",onClick:()=>C(S.id,"delete"),children:"ğŸ—‘ï¸ Delete"})]})})]},S.id))]})}):null,N>1&&e.jsx(ge,{currentPage:p,totalPages:N,onPageChange:b,totalItems:K.length,itemsPerPage:ae}),$&&e.jsx(Ne,{isOpen:$.isOpen,onClose:()=>_(null),onConfirm:$.onConfirm,title:$.title,message:$.message,confirmText:$.confirmText,variant:$.variant}),T&&e.jsx("div",{className:"loading-overlay",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Processing..."})]})}),e.jsx(Je,{isOpen:Z,onClose:()=>ee(!1),onSuccess:J})]})},es=({onBack:r})=>{const[h,a]=c.useState([]),[s,j]=c.useState(!0),[l,t]=c.useState(null),[n,o]=c.useState(null),[p,b]=c.useState(!1),[g,A]=c.useState(!1),[u,k]=c.useState(""),[D,f]=c.useState(!1);c.useEffect(()=>{I()},[]);const I=async()=>{try{j(!0),t(null);const w=await Le();w.data.success?a(w.data.data):t("Failed to load pending doctors")}catch(w){console.error("Error loading pending doctors:",w),t("Failed to load pending doctors")}finally{j(!1)}},z=async w=>{try{f(!0),(await ze(w)).data.success?(a(i=>i.filter(d=>d._id!==w)),alert("Doctor approved successfully!")):alert("Failed to approve doctor")}catch(x){console.error("Error approving doctor:",x),alert("Failed to approve doctor")}finally{f(!1)}},$=async()=>{if(!n||!u.trim()){alert("Please provide a reason for rejection");return}try{f(!0),(await $e(n._id,u)).data.success?(a(x=>x.filter(i=>i._id!==n._id)),b(!1),o(null),k(""),alert("Doctor rejected successfully!")):alert("Failed to reject doctor")}catch(w){console.error("Error rejecting doctor:",w),alert("Failed to reject doctor")}finally{f(!1)}},_=w=>{o(w),b(!0)},T=()=>{b(!1),o(null),k("")},q=w=>{o(w),A(!0)},Z=()=>{A(!1),o(null)},ee=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?e.jsx("div",{className:"doctor-approval-dashboard",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading pending doctors..."})]})}):l?e.jsx("div",{className:"doctor-approval-dashboard",children:e.jsxs("div",{className:"error-state",children:[e.jsx("div",{className:"error-icon",children:"âš ï¸"}),e.jsx("p",{children:l}),e.jsx(y,{onClick:I,variant:"primary",children:"Try Again"})]})}):e.jsxs("div",{className:"doctor-approval-dashboard",children:[e.jsxs("div",{className:"approval-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"ğŸ‘¨â€âš•ï¸ Doctor Approval Dashboard"}),e.jsx("p",{children:"Review and approve pending doctor registrations"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx(y,{onClick:r,variant:"default",children:"â† Back"}),e.jsx(y,{onClick:I,variant:"primary",children:"ğŸ”„ Refresh"})]})]}),e.jsxs("div",{className:"approval-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:h.length}),e.jsx("div",{className:"stat-label",children:"Pending Approvals"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:h.filter(w=>w.specialization==="Cardiology").length}),e.jsx("div",{className:"stat-label",children:"Cardiology"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:h.filter(w=>w.specialization==="General Medicine").length}),e.jsx("div",{className:"stat-label",children:"General Medicine"})]})]}),h.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"âœ…"}),e.jsx("h3",{children:"No Pending Approvals"}),e.jsx("p",{children:"All doctor registrations have been reviewed."})]}):e.jsx("div",{className:"pending-doctors-list",children:h.map(w=>{var x;return e.jsxs("div",{className:"doctor-card",children:[e.jsxs("div",{className:"doctor-info",children:[e.jsx("div",{className:"doctor-avatar",children:w.name.charAt(0)}),e.jsxs("div",{className:"doctor-details",children:[e.jsx("h3",{children:w.name}),e.jsx("p",{className:"doctor-email",children:w.email}),e.jsxs("p",{className:"doctor-phone",children:["ğŸ“ ",w.phone]}),e.jsx("div",{className:"doctor-specialization",children:e.jsx("span",{className:"specialization-badge",children:w.specialization})})]})]}),e.jsxs("div",{className:"doctor-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("strong",{children:"Qualification:"})," ",w.qualification]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("strong",{children:"Experience:"})," ",w.experience," years"]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("strong",{children:"Consultation Fee:"})," â‚¹",w.consultationFee]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("strong",{children:"Available Days:"})," ",(x=w.availableDays)==null?void 0:x.join(", ")]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("strong",{children:"Registered:"})," ",ee(w.createdAt)]})]}),e.jsxs("div",{className:"doctor-actions",children:[e.jsx(y,{onClick:()=>q(w),variant:"primary",size:"medium",disabled:D,children:"ğŸ‘ï¸ View Profile"}),e.jsx(y,{onClick:()=>z(w._id),variant:"success",size:"medium",disabled:D,children:"âœ… Approve"}),e.jsx(y,{onClick:()=>_(w),variant:"danger",size:"medium",disabled:D,children:"âŒ Reject"})]})]},w._id)})}),e.jsx(Qe,{isOpen:g,onClose:Z,doctor:n,onApprove:z,onReject:_,isProcessing:D}),e.jsx(ce,{isOpen:p,onClose:T,title:"Reject Doctor Registration",size:"medium",children:e.jsxs("div",{className:"reject-modal-content",children:[e.jsxs("div",{className:"doctor-summary",children:[e.jsx("h4",{children:"Doctor Information:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",n==null?void 0:n.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",n==null?void 0:n.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Specialization:"})," ",n==null?void 0:n.specialization]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"rejectReason",children:"Reason for Rejection *"}),e.jsx("textarea",{id:"rejectReason",value:u,onChange:w=>k(w.target.value),placeholder:"Please provide a reason for rejecting this doctor registration...",rows:"4",className:"reject-reason-textarea"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx(y,{onClick:T,variant:"default",disabled:D,children:"Cancel"}),e.jsx(y,{onClick:$,variant:"danger",disabled:D||!u.trim(),children:D?"Rejecting...":"Reject Doctor"})]})]})})]})},ye=({sidebarOpen:r,setSidebarOpen:h})=>{var O;const{user:a,getRoleDetails:s,can:j}=te(),[l,t]=c.useState("overview"),[n,o]=c.useState({totalUsers:1247,totalPatients:892,totalDoctors:45,totalAppointments:3200,todayRevenue:15420,activeUsers:156,pendingApprovals:8,systemHealth:98}),[p,b]=c.useState([{id:1,icon:"ğŸ‘¤",message:"New patient registered: John Doe",timestamp:"2 minutes ago",priority:"info"},{id:2,icon:"ğŸ‘¨â€âš•ï¸",message:"Dr. Smith completed consultation",timestamp:"5 minutes ago",priority:"success"},{id:3,icon:"ğŸ“…",message:"Appointment scheduled for tomorrow",timestamp:"10 minutes ago",priority:"info"},{id:4,icon:"âš ï¸",message:"System maintenance scheduled",timestamp:"1 hour ago",priority:"warning"},{id:5,icon:"ğŸ’°",message:"Payment received: $500",timestamp:"2 hours ago",priority:"success"}]),[g,A]=c.useState([]),[u,k]=c.useState([]),[D,f]=c.useState([]),[I,z]=c.useState(!0),$=s();c.useEffect(()=>{_()},[]),c.useEffect(()=>{const v=J=>{if(r&&window.innerWidth<=768){const Y=document.querySelector(".dashboard-sidebar"),se=document.querySelector(".mobile-menu-toggle");Y&&!Y.contains(J.target)&&!(se!=null&&se.contains(J.target))&&h(!1)}};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[r]);const _=async()=>{try{z(!0);const v=[{id:1,name:"John Doe",email:"john@example.com",role:"patient",status:"active",lastLogin:"2 hours ago",registrationDate:"2024-01-15"},{id:2,name:"Dr. Sarah Smith",email:"sarah@hospital.com",role:"doctor",status:"active",lastLogin:"1 hour ago",registrationDate:"2024-01-10"},{id:3,name:"Mike Johnson",email:"mike@example.com",role:"patient",status:"pending",lastLogin:"Never",registrationDate:"2024-01-20"},{id:4,name:"Lisa Wilson",email:"lisa@hospital.com",role:"nurse",status:"active",lastLogin:"30 minutes ago",registrationDate:"2024-01-12"},{id:5,name:"David Brown",email:"david@example.com",role:"receptionist",status:"active",lastLogin:"15 minutes ago",registrationDate:"2024-01-08"},{id:6,name:"Emma Davis",email:"emma@hospital.com",role:"admin",status:"active",lastLogin:"5 minutes ago",registrationDate:"2024-01-05"}],J=[{id:1,name:"John Doe",email:"john@example.com",uhid:"DELH01-250901-0001",age:45,gender:"Male",mobile:"+91 98765 43210",lastVisit:"2024-01-15",status:"active",registrationDate:"2024-01-15"},{id:2,name:"Sarah Smith",email:"sarah@example.com",uhid:"DELH01-250901-0002",age:32,gender:"Female",mobile:"+91 98765 43211",lastVisit:"2024-01-10",status:"active",registrationDate:"2024-01-10"},{id:3,name:"Mike Johnson",email:"mike@example.com",uhid:"DELH01-250901-0003",age:58,gender:"Male",mobile:"+91 98765 43212",lastVisit:"2024-01-20",status:"active",registrationDate:"2024-01-20"},{id:4,name:"Lisa Wilson",email:"lisa@example.com",uhid:"DELH01-250901-0004",age:28,gender:"Female",mobile:"+91 98765 43213",lastVisit:"2024-01-18",status:"active",registrationDate:"2024-01-18"},{id:5,name:"David Brown",email:"david@example.com",uhid:"DELH01-250901-0005",age:35,gender:"Male",mobile:"+91 98765 43214",lastVisit:"2024-01-12",status:"pending",registrationDate:"2024-01-12"},{id:6,name:"Emma Davis",email:"emma@example.com",uhid:"DELH01-250901-0006",age:42,gender:"Female",mobile:"+91 98765 43215",lastVisit:"2024-01-08",status:"active",registrationDate:"2024-01-08"}],Y=[{id:1,name:"Dr. Sarah Johnson",specialization:"Cardiology",experience:"10 years",patients:156,rating:4.8,status:"active",email:"sarah.johnson@hospital.com",phone:"+91 98765 43220"},{id:2,name:"Dr. Mike Brown",specialization:"General Medicine",experience:"8 years",patients:203,rating:4.6,status:"active",email:"mike.brown@hospital.com",phone:"+91 98765 43221"},{id:3,name:"Dr. Lisa Wilson",specialization:"Pediatrics",experience:"12 years",patients:189,rating:4.9,status:"active",email:"lisa.wilson@hospital.com",phone:"+91 98765 43222"},{id:4,name:"Dr. David Lee",specialization:"Orthopedics",experience:"15 years",patients:134,rating:4.7,status:"pending",email:"david.lee@hospital.com",phone:"+91 98765 43223"},{id:5,name:"Dr. Emma Davis",specialization:"Dermatology",experience:"6 years",patients:98,rating:4.5,status:"active",email:"emma.davis@hospital.com",phone:"+91 98765 43224"}];A(v),f(Y),k(J),await new Promise(se=>setTimeout(se,1e3)),z(!1)}catch(v){console.error("Error loading admin data:",v),z(!1)}},T=v=>{t(v),window.innerWidth<=768&&h(!1)};if(I)return e.jsx("div",{className:"admin-dashboard",children:e.jsx("div",{className:"dashboard-content",children:e.jsx("div",{className:"loading-container",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading Admin Dashboard..."})]})})})});const q=()=>e.jsxs("div",{className:"dashboard-overview",children:[e.jsxs("div",{className:"welcome-section",children:[e.jsxs("div",{className:"welcome-content",children:[e.jsxs("h1",{className:"welcome-title",children:["Good morning, ",(a==null?void 0:a.name)||"Admin"]}),e.jsx("p",{className:"welcome-subtitle",children:"Here's your hospital overview for today"})]}),e.jsx("div",{className:"welcome-actions",children:e.jsx(y,{variant:"default",size:"medium",onClick:()=>t("reports"),children:"ğŸ“Š View Reports"})})]}),e.jsxs("div",{className:"priority-metrics",children:[e.jsxs("div",{className:"metric-card primary-large",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("div",{className:"metric-icon patients",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19 8h-2v3h-3v2h3v3h2v-3h3v-2h-3V8zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"})})}),e.jsxs("div",{className:"metric-trend positive",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})}),e.jsx("span",{children:"+8%"})]})]}),e.jsxs("div",{className:"metric-content",children:[e.jsx("div",{className:"metric-value",children:n.totalPatients.toLocaleString()}),e.jsx("div",{className:"metric-label",children:"Total Patients"}),e.jsx("div",{className:"metric-description",children:"Active patients in system"})]}),e.jsx("div",{className:"metric-action",children:e.jsx(y,{variant:"default",size:"small",onClick:()=>t("patients"),children:"Manage Patients"})})]}),e.jsxs("div",{className:"metric-card revenue-large",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("div",{className:"metric-icon revenue",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"})})}),e.jsxs("div",{className:"metric-trend positive",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})}),e.jsx("span",{children:"+22%"})]})]}),e.jsxs("div",{className:"metric-content",children:[e.jsxs("div",{className:"metric-value",children:["$",n.todayRevenue.toLocaleString()]}),e.jsx("div",{className:"metric-label",children:"Today's Revenue"}),e.jsx("div",{className:"metric-description",children:"Revenue generated today"})]}),e.jsx("div",{className:"metric-action",children:e.jsx(y,{variant:"default",size:"small",onClick:()=>t("reports"),children:"View Details"})})]})]}),e.jsxs("div",{className:"secondary-metrics",children:[e.jsx("h3",{className:"section-subtitle",children:"Quick Stats"}),e.jsxs("div",{className:"metrics-compact",children:[e.jsxs("div",{className:"metric-compact",onClick:()=>t("users"),children:[e.jsx("div",{className:"compact-icon users",children:"ğŸ‘¥"}),e.jsxs("div",{className:"compact-content",children:[e.jsx("div",{className:"compact-value",children:n.totalUsers.toLocaleString()}),e.jsx("div",{className:"compact-label",children:"Users"})]})]}),e.jsxs("div",{className:"metric-compact",onClick:()=>t("doctors"),children:[e.jsx("div",{className:"compact-icon doctors",children:"ğŸ‘¨â€âš•ï¸"}),e.jsxs("div",{className:"compact-content",children:[e.jsx("div",{className:"compact-value",children:n.totalDoctors}),e.jsx("div",{className:"compact-label",children:"Doctors"})]})]}),e.jsxs("div",{className:"metric-compact",onClick:()=>t("reports"),children:[e.jsx("div",{className:"compact-icon appointments",children:"ğŸ“…"}),e.jsxs("div",{className:"compact-content",children:[e.jsx("div",{className:"compact-value",children:n.totalAppointments.toLocaleString()}),e.jsx("div",{className:"compact-label",children:"Appointments"})]})]}),e.jsxs("div",{className:"metric-compact",children:[e.jsx("div",{className:"compact-icon active",children:"ğŸŸ¢"}),e.jsxs("div",{className:"compact-content",children:[e.jsx("div",{className:"compact-value",children:n.activeUsers}),e.jsx("div",{className:"compact-label",children:"Online Now"})]})]})]})]}),e.jsxs("div",{className:"actionable-content",children:[e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Recent Activity"}),e.jsx("button",{className:"btn-text",children:"View All"})]}),e.jsx("div",{className:"activity-list",children:p.slice(0,3).map(v=>e.jsxs("div",{className:`activity-item ${v.priority}`,children:[e.jsx("div",{className:"activity-icon",children:v.icon}),e.jsxs("div",{className:"activity-content",children:[e.jsx("p",{className:"activity-message",children:v.message}),e.jsx("span",{className:"activity-time",children:v.timestamp})]})]},v.id))})]}),e.jsxs("div",{className:"content-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Quick Actions"})}),e.jsxs("div",{className:"quick-actions-list",children:[e.jsxs("button",{className:"quick-action-item",onClick:()=>t("patients"),children:[e.jsx("div",{className:"action-icon",children:"ğŸ¥"}),e.jsxs("div",{className:"action-content",children:[e.jsx("span",{className:"action-title",children:"Register Patient"}),e.jsx("span",{className:"action-desc",children:"Add new patient to system"})]})]}),e.jsxs("button",{className:"quick-action-item",onClick:()=>t("doctors"),children:[e.jsx("div",{className:"action-icon",children:"ğŸ‘¨â€âš•ï¸"}),e.jsxs("div",{className:"action-content",children:[e.jsx("span",{className:"action-title",children:"Manage Doctors"}),e.jsx("span",{className:"action-desc",children:"View and update doctor profiles"})]})]}),e.jsxs("button",{className:"quick-action-item",onClick:()=>t("doctor-approval"),children:[e.jsx("div",{className:"action-icon",children:"âœ…"}),e.jsxs("div",{className:"action-content",children:[e.jsx("span",{className:"action-title",children:"Doctor Approvals"}),e.jsx("span",{className:"action-desc",children:"Review pending doctor registrations"})]})]}),e.jsxs("button",{className:"quick-action-item",onClick:()=>t("users"),children:[e.jsx("div",{className:"action-icon",children:"ğŸ‘¥"}),e.jsxs("div",{className:"action-content",children:[e.jsx("span",{className:"action-title",children:"User Management"}),e.jsx("span",{className:"action-desc",children:"Manage system users and roles"})]})]})]})]})]})]}),Z=()=>e.jsx(Ze,{onBack:()=>t("overview")}),ee=()=>e.jsx(Ke,{}),w=()=>e.jsx(Xe,{onBack:()=>t("overview")}),x=()=>e.jsx(es,{onBack:()=>t("overview")}),i=()=>e.jsxs("div",{className:"prescriptions-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ’Š Prescription Management"}),e.jsx("p",{children:"Manage patient prescriptions and medication records"})]}),e.jsx("div",{className:"prescriptions-content",children:e.jsx("iframe",{src:"/prescriptions",style:{width:"100%",height:"800px",border:"none"},title:"Prescription Management"})})]}),d=()=>e.jsxs("div",{className:"reports-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ“Š Reports & Analytics"}),e.jsxs("div",{className:"section-actions",children:[e.jsx(y,{variant:"default",size:"medium",children:"Generate Report"}),e.jsx(y,{variant:"default",size:"medium",children:"Export Data"})]})]}),e.jsxs("div",{className:"reports-grid",children:[e.jsxs("div",{className:"report-card",children:[e.jsx("h3",{children:"ğŸ“ˆ Revenue Report"}),e.jsxs("div",{className:"report-content",children:[e.jsx("div",{className:"chart-placeholder",children:e.jsx("p",{children:"Revenue chart would be displayed here"})}),e.jsxs("div",{className:"report-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"$45,230"}),e.jsx("span",{className:"stat-label",children:"This Month"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"+12%"}),e.jsx("span",{className:"stat-label",children:"vs Last Month"})]})]})]})]}),e.jsxs("div",{className:"report-card",children:[e.jsx("h3",{children:"ğŸ‘¥ User Growth"}),e.jsxs("div",{className:"report-content",children:[e.jsx("div",{className:"chart-placeholder",children:e.jsx("p",{children:"User growth chart would be displayed here"})}),e.jsxs("div",{className:"report-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"1,247"}),e.jsx("span",{className:"stat-label",children:"Total Users"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"+8%"}),e.jsx("span",{className:"stat-label",children:"Growth Rate"})]})]})]})]}),e.jsxs("div",{className:"report-card",children:[e.jsx("h3",{children:"ğŸ“… Appointment Trends"}),e.jsxs("div",{className:"report-content",children:[e.jsx("div",{className:"chart-placeholder",children:e.jsx("p",{children:"Appointment trends chart would be displayed here"})}),e.jsxs("div",{className:"report-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"3,200"}),e.jsx("span",{className:"stat-label",children:"Total Appointments"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"+15%"}),e.jsx("span",{className:"stat-label",children:"vs Last Month"})]})]})]})]})]})]}),F=()=>e.jsxs("div",{className:"settings-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"âš™ï¸ System Settings"})}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"settings-card",children:[e.jsx("h3",{children:"ğŸ¥ Hospital Information"}),e.jsxs("div",{className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hospital Name"}),e.jsx("input",{type:"text",defaultValue:"Digital Hospital"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Hospital Code"}),e.jsx("input",{type:"text",defaultValue:"DELH01"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address"}),e.jsx("textarea",{defaultValue:"123 Medical Street, Delhi, India"})]}),e.jsx("button",{className:"btn-primary",children:"Save Changes"})]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsx("h3",{children:"ğŸ” Security Settings"}),e.jsxs("div",{className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password Policy"}),e.jsxs("select",{children:[e.jsx("option",{children:"Strong (8+ chars, special chars)"}),e.jsx("option",{children:"Medium (6+ chars)"}),e.jsx("option",{children:"Basic (4+ chars)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Session Timeout"}),e.jsxs("select",{children:[e.jsx("option",{children:"30 minutes"}),e.jsx("option",{children:"1 hour"}),e.jsx("option",{children:"2 hours"}),e.jsx("option",{children:"8 hours"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Two-Factor Authentication"}),e.jsxs("div",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsx("button",{className:"btn-primary",children:"Save Changes"})]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsx("h3",{children:"ğŸ“§ Notification Settings"}),e.jsxs("div",{className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Notifications"}),e.jsxs("div",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"SMS Notifications"}),e.jsxs("div",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Push Notifications"}),e.jsxs("div",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsx("button",{className:"btn-primary",children:"Save Changes"})]})]})]})]});return e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("aside",{className:`dashboard-sidebar ${r?"open":""}`,children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:"ğŸ¥"}),e.jsxs("div",{className:"logo-text",children:[e.jsx("h2",{children:"Digital Hospital"}),e.jsx("p",{children:"Admin Panel"})]})]})}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("div",{className:"nav-section",children:[e.jsx("h3",{className:"nav-section-title",children:"Dashboard"}),e.jsxs("button",{className:`nav-item ${l==="overview"?"active":""}`,onClick:()=>T("overview"),children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“Š"}),e.jsx("span",{className:"nav-text",children:"Overview"})]})]}),e.jsxs("div",{className:"nav-section",children:[e.jsx("h3",{className:"nav-section-title",children:"Management"}),e.jsxs("button",{className:`nav-item ${l==="users"?"active":""}`,onClick:()=>T("users"),children:[e.jsx("span",{className:"nav-icon",children:"ğŸ‘¥"}),e.jsx("span",{className:"nav-text",children:"Users"})]}),e.jsxs("button",{className:`nav-item ${l==="patients"?"active":""}`,onClick:()=>T("patients"),children:[e.jsx("span",{className:"nav-icon",children:"ğŸ¥"}),e.jsx("span",{className:"nav-text",children:"Patients"})]}),e.jsxs("button",{className:`nav-item ${l==="doctors"?"active":""}`,onClick:()=>T("doctors"),children:[e.jsx("span",{className:"nav-icon",children:"ğŸ‘¨â€âš•ï¸"}),e.jsx("span",{className:"nav-text",children:"Doctors"})]}),e.jsxs("button",{className:`nav-item ${l==="prescriptions"?"active":""}`,onClick:()=>T("prescriptions"),children:[e.jsx("span",{className:"nav-icon",children:"ğŸ’Š"}),e.jsx("span",{className:"nav-text",children:"Prescriptions"})]})]}),e.jsxs("div",{className:"nav-section",children:[e.jsx("h3",{className:"nav-section-title",children:"Analytics"}),e.jsxs("button",{className:`nav-item ${l==="reports"?"active":""}`,onClick:()=>T("reports"),children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“ˆ"}),e.jsx("span",{className:"nav-text",children:"Reports"})]})]}),e.jsxs("div",{className:"nav-section",children:[e.jsx("h3",{className:"nav-section-title",children:"System"}),e.jsxs("button",{className:`nav-item ${l==="settings"?"active":""}`,onClick:()=>T("settings"),children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"}),e.jsx("span",{className:"nav-text",children:"Settings"})]})]})]}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("div",{className:"user-profile",children:[e.jsx("div",{className:"user-avatar",children:((O=a==null?void 0:a.name)==null?void 0:O.charAt(0))||"A"}),e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-name",children:(a==null?void 0:a.name)||"Admin"}),e.jsx("div",{className:"user-role",children:$==null?void 0:$.label})]})]})})]}),e.jsx("div",{className:"dashboard-content",children:e.jsxs("main",{className:"dashboard-main",children:[l==="overview"&&q(),l==="users"&&Z(),l==="patients"&&ee(),l==="doctors"&&w(),l==="doctor-approval"&&x(),l==="prescriptions"&&i(),l==="reports"&&d(),l==="settings"&&F()]})})]})},ss=({sidebarOpen:r,setSidebarOpen:h})=>{const{user:a,getRoleDetails:s}=te();return s(),e.jsx("div",{className:"super-admin-dashboard",children:e.jsx(ye,{sidebarOpen:r,setSidebarOpen:h})})},he=({children:r,sidebarOpen:h,setSidebarOpen:a,currentView:s,setCurrentView:j,navigationItems:l=[],title:t="Dashboard",subtitle:n="Welcome to your dashboard"})=>{var A,u;const{user:o,getRoleDetails:p}=te(),b=p(),g=k=>{j(k)};return e.jsxs("div",{className:"standard-dashboard",children:[e.jsxs("aside",{className:`dashboard-sidebar ${h?"open":""}`,children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:"ğŸ¥"}),e.jsxs("div",{className:"logo-text",children:[e.jsx("h2",{children:"Digital Hospital"}),e.jsx("p",{children:(b==null?void 0:b.label)||"Dashboard"})]})]})}),e.jsx("nav",{className:"sidebar-nav",children:l.map((k,D)=>e.jsxs("div",{className:"nav-section",children:[k.title&&e.jsx("h3",{className:"nav-section-title",children:k.title}),k.items.map((f,I)=>e.jsxs("button",{className:`nav-item ${s===f.view?"active":""}`,onClick:()=>g(f.view),children:[e.jsx("span",{className:"nav-icon",children:f.icon}),e.jsx("span",{className:"nav-text",children:f.label})]},I))]},D))}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("div",{className:"user-profile",children:[e.jsx("div",{className:"user-avatar",children:((A=o==null?void 0:o.name)==null?void 0:A.charAt(0))||((u=o==null?void 0:o.email)==null?void 0:u.charAt(0))||"A"}),e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-name",children:(o==null?void 0:o.name)||"User"}),e.jsx("div",{className:"user-role",children:(b==null?void 0:b.label)||"Role"})]})]})})]}),e.jsx("div",{className:"dashboard-content",children:e.jsx("main",{className:"dashboard-main",children:r})})]})},as=({sidebarOpen:r,setSidebarOpen:h})=>{const{user:a,getRoleDetails:s,can:j}=te(),[l,t]=c.useState("schedule"),[n,o]=c.useState({todayAppointments:0,completedVisits:0,pendingVisits:0,totalPatients:0,averageRating:0,monthlyRevenue:0}),[p,b]=c.useState([]),[g,A]=c.useState([]),[u,k]=c.useState([]),[D,f]=c.useState(!0),[I,z]=c.useState(null),[$,_]=c.useState(!1);s(),c.useEffect(()=>{(a!=null&&a.id||a!=null&&a._id)&&T()},[a]);const T=async()=>{try{f(!0);const v=(a==null?void 0:a.id)||(a==null?void 0:a._id);if(!v){console.error("No doctor ID found in user context");return}console.log("ğŸ” Loading appointments for doctor:",v);const J=new Date().toISOString().split("T")[0],Y=await Pe(v,J);if(console.log("ğŸ“… Appointments response:",Y.data),Y.data.success){const K=(Y.data.data.visits||[]).map(m=>{var R,C,E;return{id:m._id||m.visitId,visitId:m.visitId,time:m.appointmentTime,patient:((R=m.patientId)==null?void 0:R.name)||"Unknown Patient",patientId:((C=m.patientId)==null?void 0:C._id)||m.patientId,type:m.visitType,status:((E=m.status)==null?void 0:E.toLowerCase())||"pending",notes:m.chiefComplaint||m.notes||"No notes",department:m.department,priority:m.priority,appointmentDate:m.appointmentDate}}),ae=K.length,N=K.filter(m=>m.status==="completed").length,L=K.filter(m=>m.status==="scheduled"||m.status==="pending").length,G=K.filter(m=>m.status==="in progress").length,Q=[...new Map(K.map(m=>[m.patientId,m])).values()],P={todayAppointments:ae,completedVisits:N,pendingVisits:L,inProgressVisits:G,totalPatients:Q.length,averageRating:4.8,monthlyRevenue:0};o(P),b(K),A(Q.map(m=>({id:m.patientId,name:m.patient,lastVisit:m.appointmentDate,condition:m.department,status:m.status,nextAppointment:m.appointmentDate}))),k(K.map(m=>({id:m.id,patient:m.patient,date:m.appointmentDate,diagnosis:m.department,treatment:"Not specified",notes:m.notes}))),console.log("âœ… Doctor data loaded successfully:",{stats:P,appointments:K.length,patients:Q.length})}else console.error("Failed to fetch appointments:",Y.data.message),o({todayAppointments:0,completedVisits:0,pendingVisits:0,inProgressVisits:0,totalPatients:0,averageRating:0,monthlyRevenue:0}),b([]),A([]),k([])}catch(v){console.error("Error loading doctor data:",v),o({todayAppointments:0,completedVisits:0,pendingVisits:0,inProgressVisits:0,totalPatients:0,averageRating:0,monthlyRevenue:0}),b([]),A([]),k([])}finally{f(!1)}},q=(v,J)=>{console.log(`Appointment action: ${J} for appointment ${v.id}`),(J==="view"||J==="start"||J==="complete")&&(z(v),_(!0))},Z=v=>{b(J=>J.map(Y=>Y.id===v._id||Y.id===v.visitId?{...Y,status:v.status}:Y)),T()},ee=()=>{_(!1),z(null)},w=(v,J)=>{console.log(`Patient action: ${J} for patient ${v}`),alert(`Patient action: ${J} for patient ${v}`)},x=()=>e.jsxs("div",{className:"schedule-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ“… Today's Schedule"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",onClick:T,children:"ğŸ”„ Refresh"}),e.jsx("button",{className:"btn-secondary",children:"View Calendar"})]})]}),e.jsxs("div",{className:"schedule-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.todayAppointments}),e.jsx("p",{children:"Today's Appointments"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.completedVisits}),e.jsx("p",{children:"Completed"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"â³"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.pendingVisits}),e.jsx("p",{children:"Pending"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ”„"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.inProgressVisits||0}),e.jsx("p",{children:"In Progress"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"â­"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.averageRating}),e.jsx("p",{children:"Average Rating"})]})]})]}),e.jsx("div",{className:"appointments-list",children:p.map(v=>e.jsxs("div",{className:`appointment-card ${v.status}`,children:[e.jsxs("div",{className:"appointment-time",children:[e.jsx("span",{className:"time",children:v.time}),e.jsx("span",{className:`status-badge ${v.status}`,children:v.status})]}),e.jsxs("div",{className:"appointment-details",children:[e.jsx("h4",{children:v.patient}),e.jsx("p",{children:v.type}),e.jsx("p",{className:"notes",children:v.notes})]}),e.jsxs("div",{className:"appointment-actions",children:[(v.status==="pending"||v.status==="scheduled")&&e.jsx("button",{className:"btn-small btn-primary",onClick:()=>q(v,"start"),children:"Start Visit"}),v.status==="in-progress"&&e.jsx("button",{className:"btn-small btn-success",onClick:()=>q(v,"complete"),children:"Complete"}),v.status==="completed"&&e.jsx("button",{className:"btn-small btn-info",onClick:()=>q(v,"view"),children:"View Details"}),v.status!=="completed"&&e.jsx("button",{className:"btn-small btn-secondary",onClick:()=>q(v,"view"),children:"View Details"})]})]},v.id))})]}),i=()=>e.jsxs("div",{className:"patients-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ‘¥ My Patients"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",children:"Add Patient"}),e.jsx("button",{className:"btn-secondary",children:"Search Patients"})]})]}),e.jsx("div",{className:"patients-grid",children:g.map(v=>e.jsxs("div",{className:"patient-card",children:[e.jsxs("div",{className:"patient-header",children:[e.jsx("div",{className:"patient-avatar",children:"ğŸ‘¤"}),e.jsxs("div",{className:"patient-info",children:[e.jsx("h3",{children:v.name}),e.jsxs("p",{children:["Age: ",v.age]}),e.jsxs("p",{children:["Last Visit: ",v.lastVisit]})]})]}),e.jsxs("div",{className:"patient-details",children:[e.jsxs("div",{className:"condition",children:[e.jsx("strong",{children:"Condition:"})," ",v.condition]}),e.jsxs("div",{className:"status",children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:`status-badge ${v.status}`,children:v.status})]}),e.jsxs("div",{className:"next-appointment",children:[e.jsx("strong",{children:"Next Appointment:"})," ",v.nextAppointment]})]}),e.jsxs("div",{className:"patient-actions",children:[e.jsx("button",{className:"btn-small btn-primary",onClick:()=>w(v.id,"view"),children:"View Profile"}),e.jsx("button",{className:"btn-small btn-success",onClick:()=>w(v.id,"add-note"),children:"Add Note"}),e.jsx("button",{className:"btn-small btn-warning",onClick:()=>w(v.id,"prescription"),children:"Prescription"})]})]},v.id))})]}),d=()=>e.jsxs("div",{className:"records-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ“‹ Medical Records"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",children:"Add Record"}),e.jsx("button",{className:"btn-secondary",children:"Export Records"})]})]}),e.jsxs("div",{className:"records-table",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell",children:"Patient"}),e.jsx("div",{className:"table-cell",children:"Date"}),e.jsx("div",{className:"table-cell",children:"Diagnosis"}),e.jsx("div",{className:"table-cell",children:"Treatment"}),e.jsx("div",{className:"table-cell",children:"Notes"}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),u.map(v=>e.jsxs("div",{className:"table-row",children:[e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"patient-info",children:[e.jsx("div",{className:"patient-avatar",children:"ğŸ‘¤"}),e.jsx("span",{children:v.patient})]})}),e.jsx("div",{className:"table-cell",children:v.date}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:"diagnosis-badge",children:v.diagnosis})}),e.jsx("div",{className:"table-cell",children:v.treatment}),e.jsx("div",{className:"table-cell",children:v.notes}),e.jsx("div",{className:"table-cell",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-small btn-primary",children:"View"}),e.jsx("button",{className:"btn-small btn-warning",children:"Edit"}),e.jsx("button",{className:"btn-small btn-success",children:"Print"})]})})]},v.id))]})]}),F=()=>e.jsxs("div",{className:"prescriptions-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ’Š Prescription Management"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",children:"New Prescription"}),e.jsx("button",{className:"btn-secondary",children:"View All"})]})]}),e.jsxs("div",{className:"prescription-form",children:[e.jsx("h3",{children:"Create New Prescription"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Patient"}),e.jsxs("select",{children:[e.jsx("option",{children:"Select Patient"}),g.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Medication"}),e.jsx("input",{type:"text",placeholder:"Enter medication name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dosage"}),e.jsx("input",{type:"text",placeholder:"e.g., 10mg"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Frequency"}),e.jsxs("select",{children:[e.jsx("option",{children:"Once daily"}),e.jsx("option",{children:"Twice daily"}),e.jsx("option",{children:"Three times daily"}),e.jsx("option",{children:"As needed"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Duration"}),e.jsx("input",{type:"text",placeholder:"e.g., 30 days"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Instructions"}),e.jsx("textarea",{placeholder:"Special instructions for the patient"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-primary",children:"Create Prescription"}),e.jsx("button",{className:"btn-secondary",children:"Save as Draft"})]})]}),e.jsxs("div",{className:"recent-prescriptions",children:[e.jsx("h3",{children:"Recent Prescriptions"}),e.jsx("div",{className:"prescriptions-list",children:e.jsxs("div",{className:"prescription-item",children:[e.jsxs("div",{className:"prescription-header",children:[e.jsx("span",{className:"patient-name",children:"John Doe"}),e.jsx("span",{className:"prescription-date",children:"2024-01-15"})]}),e.jsxs("div",{className:"prescription-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Medication:"})," Lisinopril 10mg"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Instructions:"})," Take once daily with food"]})]}),e.jsxs("div",{className:"prescription-actions",children:[e.jsx("button",{className:"btn-small btn-primary",children:"View"}),e.jsx("button",{className:"btn-small btn-success",children:"Print"})]})]})})]})]});if(D)return e.jsx("div",{className:"dashboard-loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading doctor dashboard..."})]})});const O=[{title:"Dashboard",items:[{view:"schedule",icon:"ğŸ“…",label:"Schedule"},{view:"patients",icon:"ğŸ‘¥",label:"Patients"},{view:"records",icon:"ğŸ“‹",label:"Records"},{view:"prescriptions",icon:"ğŸ’Š",label:"Prescriptions"}]}];return e.jsxs(he,{sidebarOpen:r,setSidebarOpen:h,currentView:l,setCurrentView:t,navigationItems:O,title:"Doctor Dashboard",subtitle:`Welcome back, ${(a==null?void 0:a.name)||"Doctor"}!`,children:[l==="schedule"&&x(),l==="patients"&&i(),l==="records"&&d(),l==="prescriptions"&&F(),e.jsx(Be,{isOpen:$,onClose:ee,appointment:I,onVisitUpdate:Z})]})},is=({sidebarOpen:r,setSidebarOpen:h})=>{const{user:a,getRoleDetails:s,can:j}=te(),[l,t]=c.useState({assignedPatients:0,todayTasks:0,completedTasks:0,pendingMedications:0}),[n,o]=c.useState([]),[p,b]=c.useState(!0),[g,A]=c.useState("overview");s(),c.useEffect(()=>{u()},[]);const u=async()=>{try{t({assignedPatients:12,todayTasks:8,completedTasks:5,pendingMedications:3}),o([{id:1,patientName:"John Smith",task:"Vital signs check",time:"09:00 AM",status:"pending"},{id:2,patientName:"Sarah Johnson",task:"Medication administration",time:"10:30 AM",status:"completed"}])}catch(f){console.error("Error loading nurse data:",f)}finally{b(!1)}};if(p)return e.jsx("div",{className:"dashboard-loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading nurse dashboard..."})]})});const k=[{title:"Dashboard",items:[{view:"overview",icon:"ğŸ“Š",label:"Overview"},{view:"tasks",icon:"ğŸ“‹",label:"Tasks"},{view:"patients",icon:"ğŸ‘¥",label:"Patients"},{view:"medications",icon:"ğŸ’Š",label:"Medications"}]}],D=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ‘¥"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:l.assignedPatients}),e.jsx("p",{children:"Assigned Patients"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“‹"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:l.todayTasks}),e.jsx("p",{children:"Today's Tasks"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:l.completedTasks}),e.jsx("p",{children:"Completed Tasks"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ’Š"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:l.pendingMedications}),e.jsx("p",{children:"Pending Medications"})]})]})]}),e.jsxs("div",{className:"content-grid",children:[e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"ğŸ“‹ Patient Tasks"}),e.jsx("div",{className:"tasks-list",children:n.map(f=>e.jsxs("div",{className:`task-item ${f.status}`,children:[e.jsx("div",{className:"task-time",children:f.time}),e.jsxs("div",{className:"task-details",children:[e.jsx("h4",{children:f.patientName}),e.jsx("p",{children:f.task})]}),e.jsx("div",{className:"task-status",children:e.jsx("span",{className:`status-badge ${f.status}`,children:f.status})})]},f.id))})]}),e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"âš¡ Quick Actions"}),e.jsxs("div",{className:"quick-actions",children:[j("VIEW_PATIENTS")&&e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ‘¤"}),e.jsx("span",{children:"View Patients"})]}),j("CREATE_MEDICAL_RECORDS")&&e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ“"}),e.jsx("span",{children:"Update Records"})]}),e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ’Š"}),e.jsx("span",{children:"Medication Schedule"})]})]})]})]})]});return e.jsxs(he,{sidebarOpen:r,setSidebarOpen:h,currentView:g,setCurrentView:A,navigationItems:k,title:"Nurse Dashboard",subtitle:`Welcome back, ${(a==null?void 0:a.name)||"Nurse"}!`,children:[g==="overview"&&D(),g==="tasks"&&e.jsx("div",{children:"Tasks Management - Coming Soon"}),g==="patients"&&e.jsx("div",{children:"Patient Management - Coming Soon"}),g==="medications"&&e.jsx("div",{children:"Medication Management - Coming Soon"})]})},ls=({sidebarOpen:r,setSidebarOpen:h})=>{const{user:a,getRoleDetails:s,can:j}=te(),[l,t]=c.useState("overview"),[n,o]=c.useState({todayAppointments:0,pendingRegistrations:0,completedCheckins:0,totalPatients:0}),[p,b]=c.useState(!0);s(),c.useEffect(()=>{g()},[]);const g=async()=>{try{o({todayAppointments:25,pendingRegistrations:8,completedCheckins:17,totalPatients:150})}catch(k){console.error("Error loading receptionist data:",k)}finally{b(!1)}};if(p)return e.jsx("div",{className:"loading-container",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading receptionist dashboard..."})]})});const A=[{title:"Dashboard",items:[{view:"overview",icon:"ğŸ“Š",label:"Overview"},{view:"appointments",icon:"ğŸ“…",label:"Appointments"},{view:"patients",icon:"ğŸ‘¥",label:"Patients"},{view:"checkin",icon:"âœ…",label:"Check-in"}]}],u=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.todayAppointments}),e.jsx("p",{children:"Today's Appointments"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ‘¤"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.pendingRegistrations}),e.jsx("p",{children:"Pending Registrations"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.completedCheckins}),e.jsx("p",{children:"Completed Check-ins"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ‘¥"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.totalPatients}),e.jsx("p",{children:"Total Patients"})]})]})]}),e.jsxs("div",{className:"content-grid",children:[e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"ğŸ“… Today's Schedule"}),e.jsxs("div",{className:"schedule-list",children:[e.jsxs("div",{className:"schedule-item",children:[e.jsx("div",{className:"schedule-time",children:"09:00 AM"}),e.jsxs("div",{className:"schedule-details",children:[e.jsx("h4",{children:"John Smith"}),e.jsx("p",{children:"Dr. Sarah Johnson - Cardiology"})]}),e.jsx("div",{className:"schedule-status",children:e.jsx("span",{className:"status-badge pending",children:"Pending"})})]}),e.jsxs("div",{className:"schedule-item",children:[e.jsx("div",{className:"schedule-time",children:"10:30 AM"}),e.jsxs("div",{className:"schedule-details",children:[e.jsx("h4",{children:"Jane Doe"}),e.jsx("p",{children:"Dr. Mike Wilson - General"})]}),e.jsx("div",{className:"schedule-status",children:e.jsx("span",{className:"status-badge completed",children:"Checked In"})})]})]})]}),e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"âš¡ Quick Actions"}),e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ‘¤"}),e.jsx("span",{children:"Register Patient"})]}),e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ“…"}),e.jsx("span",{children:"Schedule Appointment"})]}),e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"âœ…"}),e.jsx("span",{children:"Check-in Patient"})]})]})]})]})]});return e.jsxs(he,{sidebarOpen:r,setSidebarOpen:h,currentView:l,setCurrentView:t,navigationItems:A,title:"Receptionist Dashboard",subtitle:`Welcome back, ${(a==null?void 0:a.name)||"Receptionist"}!`,children:[l==="overview"&&u(),l==="appointments"&&e.jsx("div",{children:"Appointment Management - Coming Soon"}),l==="patients"&&e.jsx("div",{children:"Patient Management - Coming Soon"}),l==="checkin"&&e.jsx("div",{children:"Check-in Management - Coming Soon"})]})},ts=({sidebarOpen:r,setSidebarOpen:h})=>{const{user:a,getRoleDetails:s,can:j}=te(),[l,t]=c.useState("overview"),[n,o]=c.useState({upcomingAppointments:0,completedVisits:0,activePrescriptions:0,totalVisits:0,nextAppointment:null,lastVisit:null}),[p,b]=c.useState([]),[g,A]=c.useState([]),[u,k]=c.useState([]),[D,f]=c.useState([]),[I,z]=c.useState(!0);s(),c.useEffect(()=>{$()},[]);const $=async()=>{try{z(!0);const d={upcomingAppointments:2,completedVisits:15,activePrescriptions:3,totalVisits:15,nextAppointment:"2024-02-15 10:00 AM",lastVisit:"2024-01-15"},F=[{id:1,date:"2024-02-15",time:"10:00 AM",doctor:"Dr. Sarah Johnson",type:"Follow-up",status:"scheduled",notes:"Blood pressure check"},{id:2,date:"2024-02-28",time:"02:00 PM",doctor:"Dr. Mike Brown",type:"Consultation",status:"scheduled",notes:"Annual physical"},{id:3,date:"2024-01-15",time:"09:30 AM",doctor:"Dr. Sarah Johnson",type:"Consultation",status:"completed",notes:"Regular checkup"},{id:4,date:"2024-01-10",time:"11:00 AM",doctor:"Dr. Lisa Wilson",type:"Follow-up",status:"completed",notes:"Diabetes management"}],O=[{id:1,date:"2024-01-15",doctor:"Dr. Sarah Johnson",diagnosis:"Hypertension",treatment:"Lisinopril 10mg",notes:"Blood pressure well controlled"},{id:2,date:"2024-01-10",doctor:"Dr. Lisa Wilson",diagnosis:"Type 2 Diabetes",treatment:"Metformin 500mg",notes:"Blood sugar levels improving"},{id:3,date:"2023-12-20",doctor:"Dr. Mike Brown",diagnosis:"General Checkup",treatment:"Vitamin D supplement",notes:"Overall health good"}],v=[{id:1,medication:"Lisinopril 10mg",dosage:"Once daily",startDate:"2024-01-15",endDate:"2024-02-15",status:"active",doctor:"Dr. Sarah Johnson"},{id:2,medication:"Metformin 500mg",dosage:"Twice daily",startDate:"2024-01-10",endDate:"2024-02-10",status:"active",doctor:"Dr. Lisa Wilson"},{id:3,medication:"Vitamin D3",dosage:"Once daily",startDate:"2023-12-20",endDate:"2024-03-20",status:"active",doctor:"Dr. Mike Brown"}],J=[{id:1,from:"Dr. Sarah Johnson",subject:"Appointment Reminder",message:"Your appointment is scheduled for tomorrow at 10:00 AM",timestamp:"2 hours ago",read:!1},{id:2,from:"Hospital Admin",subject:"Lab Results Available",message:"Your recent lab results are now available in your portal",timestamp:"1 day ago",read:!0},{id:3,from:"Dr. Lisa Wilson",subject:"Prescription Refill",message:"Your prescription for Metformin is ready for pickup",timestamp:"2 days ago",read:!0}];o(d),b(F),A(O),k(v),f(J)}catch(d){console.error("Error loading patient data:",d)}finally{z(!1)}},_=(d,F)=>{console.log(`Appointment action: ${F} for appointment ${d}`),alert(`Appointment action: ${F} for appointment ${d}`)},T=(d,F)=>{console.log(`Message action: ${F} for message ${d}`),alert(`Message action: ${F} for message ${d}`)},q=()=>e.jsxs("div",{className:"patient-overview",children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.upcomingAppointments}),e.jsx("p",{children:"Upcoming Appointments"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.completedVisits}),e.jsx("p",{children:"Completed Visits"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ’Š"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.activePrescriptions}),e.jsx("p",{children:"Active Prescriptions"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ¥"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.totalVisits}),e.jsx("p",{children:"Total Visits"})]})]})]}),e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"ğŸ“… Next Appointment"}),e.jsxs("div",{className:"next-appointment",children:[e.jsxs("div",{className:"appointment-info",children:[e.jsx("h3",{children:n.nextAppointment}),e.jsx("p",{children:"Dr. Sarah Johnson - Follow-up"}),e.jsx("p",{children:"Blood pressure check"})]}),e.jsxs("div",{className:"appointment-actions",children:[e.jsx("button",{className:"btn-primary",children:"View Details"}),e.jsx("button",{className:"btn-secondary",children:"Reschedule"})]})]})]}),e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"ğŸ’Š Current Medications"}),e.jsx("div",{className:"medications-list",children:u.filter(d=>d.status==="active").map(d=>e.jsxs("div",{className:"medication-item",children:[e.jsxs("div",{className:"medication-info",children:[e.jsx("h4",{children:d.medication}),e.jsx("p",{children:d.dosage}),e.jsxs("small",{children:["Prescribed by ",d.doctor]})]}),e.jsx("div",{className:"medication-status",children:e.jsx("span",{className:"status-badge active",children:"Active"})})]},d.id))})]}),e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"ğŸ“§ Recent Messages"}),e.jsx("div",{className:"messages-list",children:D.slice(0,3).map(d=>e.jsxs("div",{className:`message-item ${d.read?"":"unread"}`,children:[e.jsxs("div",{className:"message-header",children:[e.jsx("span",{className:"sender",children:d.from}),e.jsx("span",{className:"timestamp",children:d.timestamp})]}),e.jsxs("div",{className:"message-content",children:[e.jsx("h4",{children:d.subject}),e.jsx("p",{children:d.message})]}),e.jsxs("div",{className:"message-actions",children:[e.jsx("button",{className:"btn-small btn-primary",children:"Reply"}),e.jsx("button",{className:"btn-small btn-secondary",children:"View"})]})]},d.id))})]})]})]}),Z=()=>e.jsxs("div",{className:"appointments-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ“… My Appointments"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",children:"Book Appointment"}),e.jsx("button",{className:"btn-secondary",children:"View Calendar"})]})]}),e.jsx("div",{className:"appointments-list",children:p.map(d=>e.jsxs("div",{className:`appointment-card ${d.status}`,children:[e.jsxs("div",{className:"appointment-date",children:[e.jsx("span",{className:"date",children:d.date}),e.jsx("span",{className:"time",children:d.time})]}),e.jsxs("div",{className:"appointment-details",children:[e.jsx("h4",{children:d.doctor}),e.jsx("p",{children:d.type}),e.jsx("p",{className:"notes",children:d.notes})]}),e.jsx("div",{className:"appointment-status",children:e.jsx("span",{className:`status-badge ${d.status}`,children:d.status})}),e.jsxs("div",{className:"appointment-actions",children:[d.status==="scheduled"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn-small btn-warning",onClick:()=>_(d.id,"reschedule"),children:"Reschedule"}),e.jsx("button",{className:"btn-small btn-danger",onClick:()=>_(d.id,"cancel"),children:"Cancel"})]}),e.jsx("button",{className:"btn-small btn-primary",onClick:()=>_(d.id,"view"),children:"View Details"})]})]},d.id))})]}),ee=()=>e.jsxs("div",{className:"records-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ“‹ Medical Records"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",children:"Download All"}),e.jsx("button",{className:"btn-secondary",children:"Print Records"})]})]}),e.jsx("div",{className:"records-list",children:g.map(d=>e.jsxs("div",{className:"record-card",children:[e.jsxs("div",{className:"record-header",children:[e.jsx("div",{className:"record-date",children:d.date}),e.jsx("div",{className:"record-doctor",children:d.doctor})]}),e.jsxs("div",{className:"record-content",children:[e.jsxs("div",{className:"record-section",children:[e.jsx("h4",{children:"Diagnosis"}),e.jsx("p",{children:d.diagnosis})]}),e.jsxs("div",{className:"record-section",children:[e.jsx("h4",{children:"Treatment"}),e.jsx("p",{children:d.treatment})]}),e.jsxs("div",{className:"record-section",children:[e.jsx("h4",{children:"Notes"}),e.jsx("p",{children:d.notes})]})]}),e.jsxs("div",{className:"record-actions",children:[e.jsx("button",{className:"btn-small btn-primary",children:"View Full"}),e.jsx("button",{className:"btn-small btn-success",children:"Download"}),e.jsx("button",{className:"btn-small btn-secondary",children:"Print"})]})]},d.id))})]}),w=()=>e.jsxs("div",{className:"prescriptions-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ’Š Prescriptions"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",children:"Request Refill"}),e.jsx("button",{className:"btn-secondary",children:"View All"})]})]}),e.jsx("div",{className:"prescriptions-list",children:u.map(d=>e.jsxs("div",{className:"prescription-card",children:[e.jsxs("div",{className:"prescription-header",children:[e.jsx("div",{className:"medication-name",children:d.medication}),e.jsx("div",{className:`prescription-status ${d.status}`,children:d.status})]}),e.jsxs("div",{className:"prescription-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Dosage:"})," ",d.dosage]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Start Date:"})," ",d.startDate]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"End Date:"})," ",d.endDate]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Prescribed by:"})," ",d.doctor]})]}),e.jsxs("div",{className:"prescription-actions",children:[e.jsx("button",{className:"btn-small btn-primary",children:"View Details"}),e.jsx("button",{className:"btn-small btn-success",children:"Print"}),d.status==="active"&&e.jsx("button",{className:"btn-small btn-warning",children:"Request Refill"})]})]},d.id))})]}),x=()=>e.jsxs("div",{className:"communication-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ğŸ“§ Communication"}),e.jsxs("div",{className:"section-actions",children:[e.jsx("button",{className:"btn-primary",children:"New Message"}),e.jsx("button",{className:"btn-secondary",children:"Mark All Read"})]})]}),e.jsx("div",{className:"messages-list",children:D.map(d=>e.jsxs("div",{className:`message-card ${d.read?"":"unread"}`,children:[e.jsxs("div",{className:"message-header",children:[e.jsxs("div",{className:"sender-info",children:[e.jsx("div",{className:"sender-avatar",children:"ğŸ‘¨â€âš•ï¸"}),e.jsxs("div",{className:"sender-details",children:[e.jsx("h4",{children:d.from}),e.jsx("p",{children:d.subject})]})]}),e.jsxs("div",{className:"message-meta",children:[e.jsx("span",{className:"timestamp",children:d.timestamp}),!d.read&&e.jsx("span",{className:"unread-indicator",children:"â—"})]})]}),e.jsx("div",{className:"message-content",children:e.jsx("p",{children:d.message})}),e.jsxs("div",{className:"message-actions",children:[e.jsx("button",{className:"btn-small btn-primary",onClick:()=>T(d.id,"reply"),children:"Reply"}),e.jsx("button",{className:"btn-small btn-secondary",onClick:()=>T(d.id,"view"),children:"View Full"})]})]},d.id))})]});if(I)return e.jsx("div",{className:"dashboard-loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading patient dashboard..."})]})});const i=[{title:"Dashboard",items:[{view:"overview",icon:"ğŸ“Š",label:"Overview"},{view:"appointments",icon:"ğŸ“…",label:"Appointments"},{view:"records",icon:"ğŸ“‹",label:"Records"},{view:"prescriptions",icon:"ğŸ’Š",label:"Prescriptions"},{view:"communication",icon:"ğŸ“§",label:"Messages"}]}];return e.jsxs(he,{sidebarOpen:r,setSidebarOpen:h,currentView:l,setCurrentView:t,navigationItems:i,title:"Patient Dashboard",subtitle:`Welcome back, ${(a==null?void 0:a.name)||"Patient"}!`,children:[l==="overview"&&q(),l==="appointments"&&Z(),l==="records"&&ee(),l==="prescriptions"&&w(),l==="communication"&&x()]})},ns=({sidebarOpen:r,setSidebarOpen:h})=>{const{user:a,getRoleDetails:s,can:j}=te(),[l,t]=c.useState("overview"),[n,o]=c.useState({pendingTests:0,completedTests:0,todayTests:0,urgentTests:0}),[p,b]=c.useState(!0);s(),c.useEffect(()=>{g()},[]);const g=async()=>{try{o({pendingTests:15,completedTests:8,todayTests:23,urgentTests:3})}catch(k){console.error("Error loading lab tech data:",k)}finally{b(!1)}};if(p)return e.jsx("div",{className:"loading-container",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading lab tech dashboard..."})]})});const A=[{title:"Dashboard",items:[{view:"overview",icon:"ğŸ“Š",label:"Overview"},{view:"tests",icon:"ğŸ§ª",label:"Lab Tests"},{view:"results",icon:"ğŸ“‹",label:"Results"},{view:"equipment",icon:"ğŸ”¬",label:"Equipment"}]}],u=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ§ª"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.pendingTests}),e.jsx("p",{children:"Pending Tests"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.completedTests}),e.jsx("p",{children:"Completed Tests"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.todayTests}),e.jsx("p",{children:"Today's Tests"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âš ï¸"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.urgentTests}),e.jsx("p",{children:"Urgent Tests"})]})]})]}),e.jsxs("div",{className:"content-grid",children:[e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"ğŸ§ª Recent Lab Tests"}),e.jsxs("div",{className:"tests-list",children:[e.jsxs("div",{className:"test-item",children:[e.jsxs("div",{className:"test-info",children:[e.jsx("h4",{children:"Blood Test - John Smith"}),e.jsx("p",{children:"Complete Blood Count"})]}),e.jsx("div",{className:"test-status",children:e.jsx("span",{className:"status-badge pending",children:"Pending"})})]}),e.jsxs("div",{className:"test-item",children:[e.jsxs("div",{className:"test-info",children:[e.jsx("h4",{children:"Urine Test - Jane Doe"}),e.jsx("p",{children:"Urinalysis"})]}),e.jsx("div",{className:"test-status",children:e.jsx("span",{className:"status-badge completed",children:"Completed"})})]})]})]}),e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"âš¡ Quick Actions"}),e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ§ª"}),e.jsx("span",{children:"Process Test"})]}),e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ“‹"}),e.jsx("span",{children:"Upload Results"})]}),e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ”¬"}),e.jsx("span",{children:"Equipment Status"})]})]})]})]})]});return e.jsxs(he,{sidebarOpen:r,setSidebarOpen:h,currentView:l,setCurrentView:t,navigationItems:A,title:"Lab Tech Dashboard",subtitle:`Welcome back, ${(a==null?void 0:a.name)||"Lab Tech"}!`,children:[l==="overview"&&u(),l==="tests"&&e.jsx("div",{children:"Lab Tests Management - Coming Soon"}),l==="results"&&e.jsx("div",{children:"Results Management - Coming Soon"}),l==="equipment"&&e.jsx("div",{children:"Equipment Management - Coming Soon"})]})},cs=({sidebarOpen:r,setSidebarOpen:h})=>{const{user:a,getRoleDetails:s,can:j}=te(),[l,t]=c.useState("overview"),[n,o]=c.useState({pendingPrescriptions:0,dispensedToday:0,stockAlerts:0,totalInventory:0}),[p,b]=c.useState(!0);s(),c.useEffect(()=>{g()},[]);const g=async()=>{try{o({pendingPrescriptions:12,dispensedToday:25,stockAlerts:5,totalInventory:150})}catch(k){console.error("Error loading pharmacist data:",k)}finally{b(!1)}};if(p)return e.jsx("div",{className:"loading-container",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading pharmacist dashboard..."})]})});const A=[{title:"Dashboard",items:[{view:"overview",icon:"ğŸ“Š",label:"Overview"},{view:"prescriptions",icon:"ğŸ’Š",label:"Prescriptions"},{view:"inventory",icon:"ğŸ“¦",label:"Inventory"},{view:"dispensing",icon:"ğŸ¥",label:"Dispensing"}]}],u=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ’Š"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.pendingPrescriptions}),e.jsx("p",{children:"Pending Prescriptions"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.dispensedToday}),e.jsx("p",{children:"Dispensed Today"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âš ï¸"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.stockAlerts}),e.jsx("p",{children:"Stock Alerts"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“¦"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:n.totalInventory}),e.jsx("p",{children:"Total Inventory"})]})]})]}),e.jsxs("div",{className:"content-grid",children:[e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"ğŸ’Š Pending Prescriptions"}),e.jsxs("div",{className:"prescriptions-list",children:[e.jsxs("div",{className:"prescription-item",children:[e.jsxs("div",{className:"prescription-info",children:[e.jsx("h4",{children:"John Smith"}),e.jsx("p",{children:"Paracetamol 500mg - 2 tablets daily"})]}),e.jsx("div",{className:"prescription-status",children:e.jsx("span",{className:"status-badge pending",children:"Pending"})})]}),e.jsxs("div",{className:"prescription-item",children:[e.jsxs("div",{className:"prescription-info",children:[e.jsx("h4",{children:"Jane Doe"}),e.jsx("p",{children:"Amoxicillin 250mg - 3 times daily"})]}),e.jsx("div",{className:"prescription-status",children:e.jsx("span",{className:"status-badge ready",children:"Ready"})})]})]})]}),e.jsxs("div",{className:"content-card",children:[e.jsx("h2",{children:"âš¡ Quick Actions"}),e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ’Š"}),e.jsx("span",{children:"Process Prescription"})]}),e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ“¦"}),e.jsx("span",{children:"Check Inventory"})]}),e.jsxs("button",{className:"action-btn",children:[e.jsx("span",{className:"action-icon",children:"ğŸ¥"}),e.jsx("span",{children:"Dispense Medicine"})]})]})]})]})]});return e.jsxs(he,{sidebarOpen:r,setSidebarOpen:h,currentView:l,setCurrentView:t,navigationItems:A,title:"Pharmacist Dashboard",subtitle:`Welcome back, ${(a==null?void 0:a.name)||"Pharmacist"}!`,children:[l==="overview"&&u(),l==="prescriptions"&&e.jsx("div",{children:"Prescription Management - Coming Soon"}),l==="inventory"&&e.jsx("div",{children:"Inventory Management - Coming Soon"}),l==="dispensing"&&e.jsx("div",{children:"Dispensing Management - Coming Soon"})]})},rs=({sidebarOpen:r,setSidebarOpen:h})=>{const{userRole:a,isLoading:s}=te();if(s)return e.jsx("div",{className:"role-dashboard-loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading dashboard..."})]})});const j=()=>{switch(a){case oe.SUPER_ADMIN:return e.jsx(ss,{sidebarOpen:r,setSidebarOpen:h});case oe.ADMIN:return e.jsx(ye,{sidebarOpen:r,setSidebarOpen:h});case oe.DOCTOR:return e.jsx(as,{sidebarOpen:r,setSidebarOpen:h});case oe.NURSE:return e.jsx(is,{sidebarOpen:r,setSidebarOpen:h});case oe.RECEPTIONIST:return e.jsx(ls,{sidebarOpen:r,setSidebarOpen:h});case oe.PATIENT:return e.jsx(ts,{sidebarOpen:r,setSidebarOpen:h});case oe.LAB_TECH:return e.jsx(ns,{sidebarOpen:r,setSidebarOpen:h});case oe.PHARMACIST:return e.jsx(cs,{sidebarOpen:r,setSidebarOpen:h});default:return e.jsx(os,{})}};return e.jsx("div",{className:"role-dashboard",children:j()})},os=()=>{const{user:r,getRoleDetails:h}=te(),a=h();return e.jsxs("div",{className:"default-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"Welcome to NewFlow"}),e.jsxs("div",{className:"user-info",children:[e.jsxs("span",{className:"role-badge",style:{backgroundColor:a==null?void 0:a.color},children:[a==null?void 0:a.icon," ",a==null?void 0:a.label]}),e.jsxs("p",{children:["Hello, ",(r==null?void 0:r.name)||(r==null?void 0:r.email),"!"]})]})]}),e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"info-card",children:[e.jsx("h3",{children:"Role Dashboard Not Found"}),e.jsxs("p",{children:["Your role (",r==null?void 0:r.role,") doesn't have a specific dashboard yet."]}),e.jsx("p",{children:"Please contact your administrator to set up your role-specific dashboard."})]})})]})},us=()=>{var o,p,b,g;const[r,h]=c.useState(null),[a,s]=c.useState(!0),[j,l]=c.useState(!1),t=Ce();c.useEffect(()=>{const A=localStorage.getItem("newflow_token"),u=localStorage.getItem("newflow_user");if(!A||!u){t("/login");return}h(JSON.parse(u)),s(!1)},[t]);const n=()=>{localStorage.removeItem("newflow_token"),localStorage.removeItem("newflow_user"),t("/login")};return a?e.jsx("div",{className:"newflow-dashboard-loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading NewFlow Dashboard..."})]})}):e.jsxs("div",{className:"newflow-dashboard",children:[e.jsx("header",{className:"newflow-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"mobile-menu-toggle",onClick:()=>l(!j),children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"ğŸš€ NewFlow Dashboard"}),e.jsxs("p",{children:["Welcome back, ",(r==null?void 0:r.name)||(r==null?void 0:r.email),"!"]})]})]}),e.jsx("div",{className:"header-right",children:e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"notification-btn",children:["ğŸ””",e.jsx("span",{className:"notification-badge",children:"3"})]}),e.jsxs("div",{className:"profile-dropdown",children:[e.jsxs("button",{className:"profile-btn",children:[e.jsx("div",{className:"profile-avatar",children:((o=r==null?void 0:r.name)==null?void 0:o.charAt(0))||((p=r==null?void 0:r.email)==null?void 0:p.charAt(0))||"A"}),e.jsx("span",{className:"profile-name",children:(r==null?void 0:r.name)||"Admin"}),e.jsx("span",{className:"dropdown-arrow",children:"â–¼"})]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("div",{className:"dropdown-header",children:e.jsxs("div",{className:"profile-info",children:[e.jsx("div",{className:"profile-avatar-large",children:((b=r==null?void 0:r.name)==null?void 0:b.charAt(0))||((g=r==null?void 0:r.email)==null?void 0:g.charAt(0))||"A"}),e.jsxs("div",{className:"profile-details",children:[e.jsx("div",{className:"profile-name-large",children:(r==null?void 0:r.name)||"Admin"}),e.jsx("div",{className:"profile-email",children:(r==null?void 0:r.email)||"admin@hospital.com"})]})]})}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("button",{className:"dropdown-item",children:[e.jsx("span",{className:"dropdown-icon",children:"ğŸ‘¤"}),"Profile Settings"]}),e.jsxs("button",{className:"dropdown-item",children:[e.jsx("span",{className:"dropdown-icon",children:"âš™ï¸"}),"Preferences"]}),e.jsxs("button",{className:"dropdown-item",children:[e.jsx("span",{className:"dropdown-icon",children:"ğŸ”’"}),"Security"]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("button",{onClick:n,className:"dropdown-item logout-item",children:[e.jsx("span",{className:"dropdown-icon",children:"ğŸšª"}),"Logout"]})]})]})]})})]})}),e.jsx("main",{className:"newflow-main",children:e.jsx(rs,{sidebarOpen:j,setSidebarOpen:l})})]})};export{us as default};
