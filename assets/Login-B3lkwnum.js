import{r as a,u as S,a as L,j as s,L as j,s as P,b as y,c as D}from"./index-CWlqgBx2.js";import{l as C,a as N}from"./api-CAnWjZpO.js";import{P as E}from"./PhoneInput-fKWPLc7q.js";import{L as A}from"./LoadingSpinner-Bp-X8Xl5.js";import"./index-NIGUFBhG.js";const I=()=>{const[l,v]=a.useState(""),[i,b]=a.useState(""),[t,f]=a.useState(!1),[n,c]=a.useState(""),[d,m]=a.useState(!1),g=S(),r=L(),w=async o=>{var h,p,x;o.preventDefault(),c(""),m(!0);try{console.log("Attempting login...");const e=await C(l,i);console.log("Login response:",e.data),N.set("token",e.data.token),N.set("role",e.data.doctor.role),console.log("Cookies set:",{token:e.data.token,role:e.data.doctor.role}),r(P(e.data.doctor)),r(y(e.data.token)),r(D(e.data.doctor.role)),console.log("Redux state updated");const u=o.target.querySelector(".login-button");u?(u.classList.add("login-success"),setTimeout(()=>{console.log("Navigating to dashboard..."),g("/dashboard")},600)):g("/dashboard");const k=e.data.doctor.role==="admin"?"Administrator":"Doctor";console.log(`Welcome, ${e.data.doctor.name}! Logged in as ${k}`)}catch(e){console.error("Login error:",((h=e.response)==null?void 0:h.data)||e),c(((x=(p=e.response)==null?void 0:p.data)==null?void 0:x.message)||"Login failed. Please check your credentials.")}finally{m(!1)}};return s.jsxs("div",{className:"login-container",children:[s.jsxs("div",{className:"particles",children:[s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"}),s.jsx("div",{className:"particle"})]}),s.jsxs("div",{className:"login-card",children:[s.jsxs("div",{className:"login-header",children:[s.jsx("div",{className:"login-logo",children:"üè•"}),s.jsx("h1",{className:"login-title",children:"Digital Hospital"}),s.jsx("p",{className:"login-subtitle",children:"Secure Healthcare Management System"})]}),s.jsxs("form",{onSubmit:w,className:"login-form",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Phone Number"}),s.jsx(E,{value:l,onChange:v,placeholder:"Enter your phone number",className:"login-input",required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Password"}),s.jsx("input",{type:t?"text":"password",placeholder:"Enter your password",value:i,onChange:o=>b(o.target.value),required:!0,className:"login-input"})]}),s.jsxs("div",{className:"login-checkbox-row",children:[s.jsx("input",{type:"checkbox",checked:t,onChange:()=>f(!t),id:"showPass"}),s.jsx("label",{htmlFor:"showPass",children:"Show Password"})]}),s.jsx("button",{type:"submit",className:"login-button",disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(A,{size:"small",color:"white"}),s.jsx("span",{style:{marginLeft:"10px"},children:"Signing In..."})]}):"Sign In"}),n&&s.jsx("div",{className:"login-error",children:n})]}),s.jsxs("div",{className:"login-links",children:[s.jsx(j,{to:"/register",className:"register-link",children:"üè• Register Your Hospital/Clinic"}),s.jsx(j,{to:"/forgot-password",className:"forgot-link",children:"üîê Forgot Password?"})]}),s.jsxs("div",{className:"demo-credentials",children:[s.jsx("strong",{children:"Demo Credentials:"}),s.jsx("br",{}),s.jsx("strong",{children:"Admin:"})," 9999999999 / Admin@123",s.jsx("br",{}),s.jsx("strong",{children:"Doctor:"})," 9166677753 / Test@123",s.jsx("br",{}),s.jsx("strong",{children:"Test Hospital:"})," +1234567890 / admin123"]})]})]})};export{I as default};
