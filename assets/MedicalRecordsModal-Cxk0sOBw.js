import{a}from"./index-NIGUFBhG.js";const o=a.create({baseURL:"/api"});o.interceptors.request.use(e=>{const t=localStorage.getItem("newflow_token");if(console.log("ðŸ” NewFlow API Request:",{url:e.url,method:e.method,hasToken:!!t,tokenPreview:t?t.substring(0,20)+"...":"none"}),t)e.headers.Authorization=`Bearer ${t}`;else{const s=localStorage.getItem("token");s&&(e.headers.Authorization=`Bearer ${s}`,console.log("âš ï¸ Using main app token as fallback"))}return e});o.interceptors.response.use(e=>{var t;return console.log("âœ… NewFlow API Response:",{url:e.config.url,status:e.status,dataKeys:Object.keys(e.data||{}),success:(t=e.data)==null?void 0:t.success}),e},e=>{var t,s,n,w;return console.error("âŒ NewFlow API Error:",{url:(t=e.config)==null?void 0:t.url,status:(s=e.response)==null?void 0:s.status,message:((w=(n=e.response)==null?void 0:n.data)==null?void 0:w.message)||e.message}),Promise.reject(e)});const l=e=>o.get("/newflow/patients",{params:e}),c=e=>o.get(`/newflow/patients/${e}`),i=e=>o.get(`/newflow/patients/${e}/medical-records`),u=e=>o.post("/newflow/patients",e),p=(e,t)=>o.put(`/newflow/patients/${e}`,t),g=(e=null)=>{const t=e?{department:e}:{};return o.get("/newflow/doctors",{params:t})},d=(e={})=>o.get("/newflow/doctors",{params:e}),F=e=>o.post("/newflow/doctors",e),f=e=>o.post("/newflow/visits",e),N=(e,t)=>o.put(`/newflow/visits/${e}`,t),m=e=>o.get(`/newflow/visits/patient/${e}`),P=(e,t=null)=>{const s=t?{date:t}:{};return o.get(`/newflow/visits/doctor/${e}`,{params:s})},k=()=>o.get("/newflow/doctors/pending"),$=e=>o.put(`/newflow/doctors/${e}/approve`),h=(e,t)=>o.put(`/newflow/doctors/${e}/reject`,{reason:t}),v=e=>o.get("/newflow/prescriptions",{params:e}),A=e=>o.post("/newflow/prescriptions",e);export{g as a,c as b,A as c,p as d,u as e,f,m as g,F as h,i,l as j,d as k,k as l,$ as m,P as n,v as o,h as r,N as u};
