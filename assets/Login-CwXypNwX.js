import{f as I,r as o,u as C,j as e}from"./index-CWlqgBx2.js";const P=()=>{const{login:b}=I(),[r,t]=o.useState({loginField:"9876543210",password:"password123",tenantId:"test-tenant"}),[u,g]=o.useState(!1),[p,c]=o.useState(""),[N,l]=o.useState(!1),[i,y]=o.useState({loginField:"",tenantId:"test-tenant"}),[w,x]=o.useState(!1),[h,d]=o.useState(""),j=C(),m=s=>{t({...r,[s.target.name]:s.target.value})},f=s=>{y({...i,[s.target.name]:s.target.value})},v=async s=>{s.preventDefault(),x(!0),d("");try{const n=await(await fetch("/api/newflow/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();n.success,d(n.message)}catch{d("Unable to process request. Please try again.")}finally{x(!1)}},F=async s=>{s.preventDefault(),g(!0),c("");try{const a=await fetch("/api/newflow/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(a.ok){const n=await a.json();localStorage.setItem("newflow_token",n.token),localStorage.setItem("newflow_user",JSON.stringify(n.user)),b(n.user),j("/dashboard")}else{const n=await a.json();c(n.message||"Login failed")}}catch{c("Network error. Please try again.")}finally{g(!1)}};return e.jsxs("div",{className:"newflow-login-container",children:[e.jsxs("div",{className:"newflow-login-card",children:[e.jsxs("div",{className:"newflow-header",children:[e.jsx("h1",{children:"🚀 NewFlow Login"}),e.jsx("p",{children:"Welcome to the new development flow"})]}),e.jsxs("form",{onSubmit:F,className:"newflow-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tenantId",children:"Tenant ID"}),e.jsx("input",{type:"text",id:"tenantId",name:"tenantId",value:r.tenantId,onChange:m,required:!0,placeholder:"Enter your tenant ID"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"loginField",children:"Email / Phone / User ID / Username"}),e.jsx("input",{type:"text",id:"loginField",name:"loginField",value:r.loginField,onChange:m,required:!0,placeholder:"Enter email, phone, user ID, or username"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:m,required:!0,placeholder:"Enter your password"})]}),p&&e.jsx("div",{className:"error-message",children:p}),e.jsx("button",{type:"submit",className:"newflow-btn",disabled:u,children:u?"Signing In...":"Sign In to NewFlow"})]}),e.jsx("div",{className:"forgot-password-section",children:e.jsx("button",{type:"button",className:"forgot-password-btn",onClick:()=>l(!0),children:"🔐 Forgot Password?"})}),e.jsxs("div",{className:"test-credentials",children:[e.jsx("h4",{children:"🧪 Test Credentials"}),e.jsxs("div",{className:"credential-item",children:[e.jsx("strong",{children:"Tenant ID:"})," test-tenant"]}),e.jsxs("div",{className:"credential-item",children:[e.jsx("strong",{children:"Password:"})," password123"]}),e.jsxs("div",{className:"credential-item",children:[e.jsx("strong",{children:"Login Options:"})," Email, Phone (10 digits), Doctor ID (DOC001), Patient Mobile"]}),e.jsxs("div",{className:"role-options",children:[e.jsx("h5",{children:"Choose a Role to Test:"}),e.jsxs("div",{className:"role-buttons",children:[e.jsx("button",{type:"button",className:"role-btn",onClick:()=>t({loginField:"admin@newflow.com",password:"password123",tenantId:"test-tenant"}),children:"👨‍💼 Admin"}),e.jsx("button",{type:"button",className:"role-btn",onClick:()=>t({loginField:"9876543210",password:"password123",tenantId:"test-tenant"}),children:"👨‍⚕️ Dr. Sarah Johnson (Cardiology)"}),e.jsx("button",{type:"button",className:"role-btn",onClick:()=>t({loginField:"9876543211",password:"password123",tenantId:"test-tenant"}),children:"👨‍⚕️ Dr. Michael Chen (Neurology)"}),e.jsx("button",{type:"button",className:"role-btn",onClick:()=>t({loginField:"9876543212",password:"password123",tenantId:"test-tenant"}),children:"👩‍⚕️ Dr. Lisa Wilson (Pediatrics)"}),e.jsx("button",{type:"button",className:"role-btn",onClick:()=>t({loginField:"9123456780",password:"password123",tenantId:"test-tenant"}),children:"👤 John Smith (Patient)"}),e.jsx("button",{type:"button",className:"role-btn",onClick:()=>t({loginField:"9123456782",password:"password123",tenantId:"test-tenant"}),children:"👤 Jane Doe (Patient)"}),e.jsx("button",{type:"button",className:"role-btn",onClick:()=>t({loginField:"DOC001",password:"password123",tenantId:"test-tenant"}),children:"🆔 Dr. Sarah Johnson (DOC001)"}),e.jsx("button",{type:"button",className:"role-btn super-admin",onClick:()=>t({loginField:"super@newflow.com",password:"password123",tenantId:"test-tenant"}),children:"👑 Super Admin"})]})]})]}),e.jsxs("div",{className:"newflow-footer",children:[e.jsx("p",{children:"This is the new development flow"}),e.jsx("div",{className:"footer-links",children:e.jsx("button",{type:"button",className:"footer-link",onClick:()=>j("/doctor-register"),children:"👨‍⚕️ Register as Doctor"})}),e.jsx("small",{children:"Use the flow switcher to toggle between flows"})]})]}),N&&e.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"🔐 Forgot Password"}),e.jsx("button",{className:"modal-close",onClick:()=>l(!1),children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{children:"Enter your email, phone number, or user ID to receive password reset instructions."}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"forgot-tenantId",children:"Tenant ID"}),e.jsx("input",{type:"text",id:"forgot-tenantId",name:"tenantId",value:i.tenantId,onChange:f,required:!0,placeholder:"Enter your tenant ID"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"forgot-loginField",children:"Email / Phone / User ID / Username"}),e.jsx("input",{type:"text",id:"forgot-loginField",name:"loginField",value:i.loginField,onChange:f,required:!0,placeholder:"Enter your email, phone, user ID, or username"})]}),h&&e.jsx("div",{className:`message ${h.includes("sent")?"success":"error"}`,children:h}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:w,children:w?"Sending...":"Send Reset Instructions"})]})]})]})]})})]})};export{P as default};
